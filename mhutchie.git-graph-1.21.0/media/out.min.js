"use strict";(function(L,c){var t=acquireVsCodeApi();var S={alert:'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"/></svg>',arrowDown:'<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="-1 2 12 12"><path fill-rule="evenodd" d="M7 7V3H3v4H0l5 6 5-6H7z"/></svg>',arrowUp:'<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="-1 2 12 12"><path fill-rule="evenodd" d="M5 3L0 9h3v4h4V9h3L5 3z"/></svg>',branch:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="16" viewBox="0 0 10 16"><path fill-rule="evenodd" d="M10 5c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v.3c-.02.52-.23.98-.63 1.38-.4.4-.86.61-1.38.63-.83.02-1.48.16-2 .45V4.72a1.993 1.993 0 0 0-1-3.72C.88 1 0 1.89 0 3a2 2 0 0 0 1 1.72v6.56c-.59.35-1 .99-1 1.72 0 1.11.89 2 2 2 1.11 0 2-.89 2-2 0-.53-.2-1-.53-1.36.09-.06.48-.41.59-.47.25-.11.56-.17.94-.17 1.05-.05 1.95-.45 2.75-1.25S8.95 7.77 9 6.73h-.02C9.59 6.37 10 5.73 10 5zM2 1.8c.66 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2C1.35 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2zm0 12.41c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm6-8c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"/></svg>',check:'<svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"></path></svg>',close:'<svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"/></svg>',copy:'<svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M2 13h4v1H2v-1zm5-6H2v1h5V7zm2 3V8l-3 3 3 3v-2h5v-2H9zM4.5 9H2v1h2.5V9zM2 12h2.5v-1H2v1zm9 1h1v2c-.02.28-.11.52-.3.7-.19.18-.42.28-.7.3H1c-.55 0-1-.45-1-1V4c0-.55.45-1 1-1h3c0-1.11.89-2 2-2 1.11 0 2 .89 2 2h3c.55 0 1 .45 1 1v5h-1V6H1v9h10v-2zM2 5h8c0-.55-.45-1-1-1H8c-.55 0-1-.45-1-1s-.45-1-1-1-1 .45-1 1-.45 1-1 1H3c-.55 0-1 .45-1 1z"/></svg>',download:'<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 -0.5 16 16.5"><path fill-rule="evenodd" d="M9 12h2l-3 3-3-3h2V7h2v5zm3-8c0-.44-.91-3-4.5-3C5.08 1 3 2.92 3 5 1.02 5 0 6.52 0 8c0 1.53 1 3 3 3h3V9.7H3C1.38 9.7 1.3 8.28 1.3 8c0-.17.05-1.7 1.7-1.7h1.3V5c0-1.39 1.56-2.7 3.2-2.7 2.55 0 3.13 1.55 3.2 1.8v1.2H12c.81 0 2.7.22 2.7 2.2 0 2.09-2.25 2.2-2.7 2.2h-2V11h2c2.08 0 4-1.16 4-3.5C16 5.06 14.08 4 12 4z"/></svg>',eyeOpen:'<svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"/></svg>',eyeClosed:'<svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 -1 16 16"><path fill-rule="evenodd" d="M14.822.854a.5.5 0 1 0-.707-.708l-2.11 2.11C10.89 1.483 9.565.926 8.06.926c-5.06 0-8.06 6-8.06 6s1.162 2.323 3.258 4.078l-2.064 2.065a.5.5 0 1 0 .707.707L14.822.854zM4.86 9.403L6.292 7.97A1.999 1.999 0 0 1 6 6.925c0-1.11.89-2 2-2 .384 0 .741.106 1.045.292l1.433-1.433A3.98 3.98 0 0 0 8 2.925c-2.2 0-4 1.8-4 4 0 .938.321 1.798.859 2.478zm7.005-3.514l1.993-1.992A14.873 14.873 0 0 1 16 6.925s-3 6-7.94 6a6.609 6.609 0 0 1-2.661-.57l1.565-1.566c.33.089.678.136 1.036.136 2.22 0 4-1.78 4-4 0-.358-.047-.705-.136-1.036zM9.338 8.415l.152-.151a1.996 1.996 0 0 1-.152.151z"/></svg>',fileList:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M 2,3 V 4.5 H 4 V 3 Z M 5.5,3 V 4.5 H 18 V 3 Z M 2,7 V 8.5 H 4 V 7 Z M 5.5,7 V 8.5 H 18 V 7 Z M 2,11 v 1.5 H 4 V 11 Z m 3.5,0 v 1.5 H 18 V 11 Z M 2,15 v 1.5 H 4 V 15 Z m 3.5,0 v 1.5 H 18 V 15 Z"/></svg>',fileTree:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M 2,3 V 4.5 H 4 V 3 Z M 5.5,3 V 4.5 H 14 V 3 Z M 4,7 V 8.5 H 6 V 7 Z M 7.5,7 V 8.5 H 16 V 7 Z M 6,11 v 1.5 H 8 V 11 Z m 3.5,0 v 1.5 H 18 V 11 Z M 4,15 v 1.5 H 6 V 15 Z m 3.5,0 v 1.5 H 16 V 15 Z"/></svg>',gear:'<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="-1 -1 18 18"><path fill-rule="evenodd" d="M14 8.77v-1.6l-1.94-.64-.45-1.09.88-1.84-1.13-1.13-1.81.91-1.09-.45-.69-1.92h-1.6l-.63 1.94-1.11.45-1.84-.88-1.13 1.13.91 1.81-.45 1.09L0 7.23v1.59l1.94.64.45 1.09-.88 1.84 1.13 1.13 1.81-.91 1.09.45.69 1.92h1.59l.63-1.94 1.11-.45 1.84.88 1.13-1.13-.92-1.81.47-1.09L14 8.75v.02zM7 11c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z"/></svg>',info:'<svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"/></svg>',openFile:'<svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M8.5 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h10c.55 0 1-.45 1-1V4.5L8.5 1zM11 14H1V2h7l3 3v9zM6 4.5l4 3-4 3v-2c-.98-.02-1.84.22-2.55.7-.71.48-1.19 1.25-1.45 2.3.02-1.64.39-2.88 1.13-3.73.73-.84 1.69-1.27 2.88-1.27v-2H6z"/></svg>',pencil:'<svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M0 12v3h3l8-8-3-3-8 8zm3 2H1v-2h1v1h1v1zm10.3-9.3L12 6 9 3l1.3-1.3a.996.996 0 0 1 1.41 0l1.59 1.59c.39.39.39 1.02 0 1.41z"/></svg>',review:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill-rule="evenodd" d="m4,4.7 -4,7.3 4,7.3 2.5,0 -4,-7.3 4,-7.3zM11.5,6C9,5.5 6.6,7.1 6.1,9.6c-0.5,2.6 1.1,5 3.6,5.5 1,0.2 1.8,0.1 2.7,-0.3l2.5,3.3c0.1,0.1 0.3,0.2 0.5,0.3 0.2,0 0.4,0 0.6,-0.1 0.3,-0.2 0.4,-0.4 0.4,-0.6 0,-0.2 0,-0.4 -0.1,-0.6 0,-0.2 -2.4,-3.3 -2.4,-3.3 0.7,-0.6 1,-1.5 1.3,-2.4C15.7,8.9 14,6.5 11.5,6zm8.5,-1.3 -2.5,0 4,7.3 -4.2,7.3 2.5,0L24,12zm-8.8,3c1.6,0.3 2.6,1.8 2.3,3.4 -0.3,1.6 -1.8,2.6 -3.4,2.3C8.5,13 7.4,11.6 7.8,10 8,8.4 9.6,7.3 11.2,7.7z"/></svg>',search:'<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="-0.5 -2 18 18"><path fill-rule="evenodd" d="M15.7 13.3l-3.81-3.83A5.93 5.93 0 0 0 13 6c0-3.31-2.69-6-6-6S1 2.69 1 6s2.69 6 6 6c1.3 0 2.48-.41 3.47-1.11l3.83 3.81c.19.2.45.3.7.3.25 0 .52-.09.7-.3a.996.996 0 0 0 0-1.41v.01zM7 10.7c-2.59 0-4.7-2.11-4.7-4.7 0-2.59 2.11-4.7 4.7-4.7 2.59 0 4.7 2.11 4.7 4.7 0 2.59-2.11 4.7-4.7 4.7z"/></svg>',stash:'<svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M14 9l-1.13-7.14c-.08-.48-.5-.86-1-.86H2.13c-.5 0-.92.38-1 .86L0 9v5c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V9zm-3.28.55l-.44.89c-.17.34-.52.56-.91.56H4.61c-.38 0-.72-.22-.89-.55l-.44-.91c-.17-.33-.52-.55-.89-.55H1l1-7h10l1 7h-1.38c-.39 0-.73.22-.91.55l.01.01z"/></svg>',tag:'<svg xmlns="http://www.w3.org/2000/svg" width="15" height="16" viewBox="0 0 15 16"><path fill-rule="evenodd" d="M7.73 1.73C7.26 1.26 6.62 1 5.96 1H3.5C2.13 1 1 2.13 1 3.5v2.47c0 .66.27 1.3.73 1.77l6.06 6.06c.39.39 1.02.39 1.41 0l4.59-4.59a.996.996 0 0 0 0-1.41L7.73 1.73zM2.38 7.09c-.31-.3-.47-.7-.47-1.13V3.5c0-.88.72-1.59 1.59-1.59h2.47c.42 0 .83.16 1.13.47l6.14 6.13-4.73 4.73-6.13-6.15zM3.01 3h2v2H3V3h.01z"/></svg>',loading:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="32" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M10.24 7.4a4.15 4.15 0 0 1-1.2 3.6 4.346 4.346 0 0 1-5.41.54L4.8 10.4.5 9.8l.6 4.2 1.31-1.26c2.36 1.74 5.7 1.57 7.84-.54a5.876 5.876 0 0 0 1.74-4.46l-1.75-.34zM2.96 5a4.346 4.346 0 0 1 5.41-.54L7.2 5.6l4.3.6-.6-4.2-1.31 1.26c-2.36-1.74-5.7-1.57-7.85.54C.5 5.03-.06 6.65.01 8.26l1.75.35A4.17 4.17 0 0 1 2.96 5z"/></svg>',refresh:'<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M 8.244,15.672 C 11.441,15.558 14.868,13.024 14.828,8.55 14.773,6.644 13.911,4.852 12.456,3.619 l -1.648,1.198 c 1.265,0.861 2.037,2.279 2.074,3.809 0.016,2.25 -1.808,5.025 -4.707,5.077 -2.898,0.052 -4.933,-2.08 -5.047,-4.671 C 3.07,6.705 4.635,4.651 6.893,4.088 l 0.041,1.866 3.853,-3.126 -3.978,-2.772 0.032,2.077 c -3.294,0.616 -5.755,3.541 -5.667,6.982 -3.88e-4,4.233 3.873,6.670 7.07,6.557 z"/></svg>',openFolder:'<svg xmlns="http://www.w3.org/2000/svg" class="openFolderIcon" viewBox="0 0 30 30"><path d="M 5 4 C 3.895 4 3 4.895 3 6 L 3 9 L 3 11 L 22 11 L 27 11 L 27 8 C 27 6.895 26.105 6 25 6 L 12.199219 6 L 11.582031 4.9707031 C 11.221031 4.3687031 10.570187 4 9.8671875 4 L 5 4 z M 2.5019531 13 C 1.4929531 13 0.77040625 13.977406 1.0664062 14.941406 L 4.0351562 24.587891 C 4.2941563 25.426891 5.0692656 26 5.9472656 26 L 15 26 L 24.052734 26 C 24.930734 26 25.705844 25.426891 25.964844 24.587891 L 28.933594 14.941406 C 29.229594 13.977406 28.507047 13 27.498047 13 L 15 13 L 2.5019531 13 z"/></svg>',closedFolder:'<svg xmlns="http://www.w3.org/2000/svg" class="closedFolderIcon" viewBox="0 0 30 30"><path d="M 4 3 C 2.895 3 2 3.895 2 5 L 2 8 L 13 8 L 28 8 L 28 7 C 28 5.895 27.105 5 26 5 L 11.199219 5 L 10.582031 3.9707031 C 10.221031 3.3687031 9.5701875 3 8.8671875 3 L 4 3 z M 3 10 C 2.448 10 2 10.448 2 11 L 2 23 C 2 24.105 2.895 25 4 25 L 26 25 C 27.105 25 28 24.105 28 23 L 28 11 C 28 10.448 27.552 10 27 10 L 3 10 z"/></svg>',file:'<svg xmlns="http://www.w3.org/2000/svg" class="fileIcon" viewBox="0 0 30 30"><path d="M24.707,8.793l-6.5-6.5C18.019,2.105,17.765,2,17.5,2H7C5.895,2,5,2.895,5,4v22c0,1.105,0.895,2,2,2h16c1.105,0,2-0.895,2-2 V9.5C25,9.235,24.895,8.981,24.707,8.793z M18,10c-0.552,0-1-0.448-1-1V3.904L23.096,10H18z"/></svg>',passed:'<svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 0 13 13"><path fill-rule="evenodd" d="M 6.5,0 A 6.5,6.5 0 0 0 0,6.5 6.5,6.5 0 0 0 6.5,13 6.5,6.5 0 0 0 13,6.5 6.5,6.5 0 0 0 6.5,0 Z M 9.64,2.95 11.2,4.5 5.02,10.68 C 3.92,9.57 2.81,8.46 1.7,7.35 L 3.26,5.8 5.02,7.57 Z"/></svg>',failed:'<svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 0 13 13"><path fill-rule="evenodd" d="M 6.5,0 A 6.5,6.5 0 0 0 0,6.5 6.5,6.5 0 0 0 6.5,13 6.5,6.5 0 0 0 13,6.5 6.5,6.5 0 0 0 6.5,0 Z M 4.1,2.54 6.5,4.95 8.9,2.54 10.46,4.1 8.05,6.5 10.46,8.9 8.9,10.46 6.5,8.05 4.1,10.46 2.54,8.9 4.95,6.5 2.54,4.1 Z"/></svg>',inconclusive:'<svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 0 13 13"><path fill-rule="evenodd" d="M 6.5,0 C 2.91,0 0,2.91 0,6.5 0,10.09 2.91,13 6.5,13 10.09,13 13,10.09 13,6.5 13,2.91 10.09,0 6.5,0 Z m 0.03,2.35 v 0 c 0.47,0 0.88,0.05 1.24,0.14 0.36,0.1 0.67,0.23 0.93,0.41 0.24,0.18 0.43,0.4 0.58,0.67 0.14,0.27 0.2,0.58 0.2,0.93 0,0.23 0,0.45 -0.09,0.63 C 9.3,5.31 9.14,5.49 9.05,5.62 8.91,5.79 8.9,5.82 8.7,6.02 8.53,6.2 8.35,6.36 8.15,6.5 8.03,6.6 7.94,6.7 7.85,6.79 7.77,6.88 7.7,6.97 7.65,7.08 7.6,7.18 7.56,7.29 7.53,7.4 7.5,7.52 7.5,7.54 7.5,7.67 H 5.75 c 0,-0.23 0,-0.33 0.03,-0.51 C 5.81,6.96 5.86,6.78 5.93,6.61 5.99,6.46 6.08,6.31 6.2,6.16 6.32,6.02 6.44,5.89 6.64,5.76 6.93,5.56 7.02,5.44 7.15,5.21 7.28,4.98 7.36,4.81 7.36,4.58 7.36,4.29 7.3,4.1 7.15,3.96 7.01,3.82 6.82,3.76 6.53,3.76 6.43,3.76 6.33,3.78 6.21,3.81 6.09,3.84 6.03,3.9 5.94,3.98 5.86,4.05 5.79,4.1 5.73,4.19 5.66,4.27 5.63,4.38 5.64,4.49 H 3.52 C 3.52,4.09 3.66,3.9 3.81,3.61 3.96,3.32 4.18,3.07 4.44,2.89 4.71,2.71 5.02,2.58 5.38,2.49 5.75,2.4 6.14,2.35 6.53,2.35 Z M 6.14,8.72 H 7.2 c 0.3,0 0.53,0.24 0.53,0.53 v 1.07 0 c 0,0.3 -0.23,0.53 -0.53,0.53 H 6.14 c -0.29,0 -0.53,-0.24 -0.53,-0.53 V 9.25 c 0,-0.3 0.25,-0.53 0.53,-0.53 z"/></svg>'};var s={alembic:"⚗",alien:"👽",ambulance:"🚑",apple:"🍎",arrow_down:"⬇️",arrow_up:"⬆️",art:"🎨",beers:"🍻",bento:"🍱",bookmark:"🔖",books:"📚",boom:"💥",bug:"🐛",building_construction:"🏗",bulb:"💡",busts_in_silhouette:"👥",camera_flash:"📸",card_file_box:"🗃",card_index:"📇",chart_with_upwards_trend:"📈",checkered_flag:"🏁",children_crossing:"🚸",clown_face:"🤡",construction:"🚧",construction_worker:"👷",egg:"🥚",exclamation:"❗",fire:"🔥",globe_with_meridians:"🌐",green_apple:"🍏",green_heart:"💚",hammer:"🔨",heavy_check_mark:"✔️",heavy_minus_sign:"➖",heavy_plus_sign:"➕",iphone:"📱",label:"🏷️",lipstick:"💄",lock:"🔒",loud_sound:"🔊",mag:"🔍",mute:"🔇",new:"🆕",ok_hand:"👌",package:"📦",page_facing_up:"📄",pencil:"📝",pencil2:"✏️",penguin:"🐧",poop:"💩",pushpin:"📌",racehorse:"🐎",recycle:"♻️",rewind:"⏪",robot:"🤖",rocket:"🚀",rotating_light:"🚨",see_no_evil:"🙈",shirt:"👕",sparkles:"✨",speech_balloon:"💬",tada:"🎉",triangular_ruler:"📐",truck:"🚚",twisted_rightwards_arrows:"🔀",video_game:"🎮",whale:"🐳",wheel_of_dharma:"☸️",wheelchair:"♿️",white_check_mark:"✅",wrench:"🔧",zap:"⚡️"};var i=/:([A-Za-z0-9-_]+):/g;var a={")":"(","]":"[","}":"{",">":"<"};var h={A:"Added",M:"Modified",D:"Deleted",R:"Renamed",U:"Untracked"};var n={G:"Valid Signature",U:"Good Signature with Unknown Validity",X:"Good Signature that has Expired",Y:"Good Signature made by an Expired Key",R:"Good Signature made by a Revoked Key",E:"Signature could not be checked",B:"Bad Signature"};var l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var g=/^[-\/].*|[\\" ><~^:?*[]|\.\.|\/\/|\/\.|@{|[.\/]$|\.lock$|^@$/g;var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};var r={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'","&#x2F;":"/"};var d=/[&<>"'\/]/g;var u=/&lt;|&gt;|&amp;|&quot;|&#x27;|&#x2F;/g;var k="&#8230;";var m="http://www.w3.org/2000/svg";var B="*";var p="";var v=-100;var C=-101;var y=40;var b=24;var f="active";var w="branchLabelsAlignedToGraph";var R="commitDetailsOpen";var T="disabled";var x="fetchSupported";var E="loading";var I="pendingReview";var H="refreshing";var A="head";var F="remote";var M="stash";var D="tag";var V="tagLabelsRightAligned";var U="transition";var N="eventCaptureElem";var P="--vscode-font-family";var W="--vscode-editor-font-family";var O="--vscode-editor-findMatchHighlightBackground";var z="data-error";function G(e,t,i){if(e.length!==t.length)return false;for(var s=0;s<e.length;s++){if(!i(e[s],t[s]))return false}return true}function Y(e,t){if(e.length!==t.length)return false;for(var i=0;i<e.length;i++){if(e[i]!==t[i])return false}return true}function _(e,t){var i="rgba(0,0,0,0)",s;if((s=e.match(/rgba\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)/))!==null){i="rgba("+s[1]+","+s[2]+","+s[3]+","+(parseFloat(s[4])*t).toFixed(2)+")"}else if((s=e.match(/#\s*([0-9a-fA-F]+)/))!==null){var n=s[1];var o=n.length;if(o===3||o===4||o===6||o===8){var r=o<5?{r:n[0]+n[0],g:n[1]+n[1],b:n[2]+n[2],a:o===4?n[3]+n[3]:"ff"}:{r:n[0]+n[1],g:n[2]+n[3],b:n[4]+n[5],a:o===8?n[6]+n[7]:"ff"};i="rgba("+parseInt(r.r,16)+","+parseInt(r.g,16)+","+parseInt(r.b,16)+","+(parseInt(r.a,16)*t/255).toFixed(2)+")"}}else if((s=e.match(/rgb\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)/))!==null){i="rgba("+s[1]+","+s[2]+","+s[3]+","+t+")"}return i}function q(e){return e>9?e:"0"+e}function j(e){var t=/^:[A-Za-z0-9-_]+:$/;for(var i=0;i<e.length;i++){if(t.test(e[i].shortcode)){s[e[i].shortcode.substring(1,e[i].shortcode.length-1)]=e[i].emoji}}}function Z(e){return e.replace(d,function(e){return o[e]})}function X(e){return e.replace(u,function(e){return r[e]})}var K=function(){function e(e,t,i){this.issueLinking=null;var s=e!==null?e:globalState.issueLinkingConfig;if(s!==null){try{this.issueLinking={regexp:new RegExp(s.issue,"gu"),url:s.url}}catch(e){this.issueLinking=null}}this.findUrls=t;this.whitespace=i}e.prototype.format=function(e){var t=[{type:0,str:e}];if(this.findUrls){t=this.parseUrls(t[0])}if(this.issueLinking!==null){var i=[];for(var s=0;s<t.length;s++){if(t[s].type===0){i.push.apply(i,this.parseIssueLinks(t[s]))}else{i.push(t[s])}}t=i}var n="";for(var s=0;s<t.length;s++){n+=t[s].type===0?Z(this.resolveEmojis(t[s].str)):'<a class="externalUrl" href="'+Z(t[s].url)+'" tabindex="-1">'+Z(t[s].displayText)+"</a>"}if(this.whitespace){n=n.split("\n").map(function(e){return e.replace(/^[ \t]+/,function(e){return e.replace(/ /g,"&nbsp;").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")})}).join("<br>")}return n};e.prototype.parseUrls=function(e){var t=/https?:\/\/\S+[^,.?!'":;\s]/gu;var i,s=0,n=[];while(i=t.exec(e.str)){if(s!==i.index){n.push({type:0,str:e.str.substring(s,i.index)})}var o=i[0];var r=o.substring(o.length-1);if(i.index>0&&typeof a[r]==="string"&&e.str.substring(i.index-1,i.index)===a[r]){o=o.substring(0,o.length-1);t.lastIndex--}n.push({type:1,url:o,displayText:o});s=t.lastIndex}if(s===0){return[e]}if(s!==e.str.length){n.push({type:0,str:e.str.substring(s)})}return n};e.prototype.parseIssueLinks=function(e){var t=this.issueLinking;var i,s=0,n=[];t.regexp.lastIndex=0;while(i=t.regexp.exec(e.str)){if(i[0].length===0){return[e]}if(s!==i.index){n.push({type:0,str:e.str.substring(s,i.index)})}n.push({type:1,url:i.length>1?t.url.replace("$1",i[1]):t.url,displayText:i[0]});s=t.regexp.lastIndex}if(s===0){return[e]}if(s!==e.str.length){n.push({type:0,str:e.str.substring(s)})}return n};e.prototype.resolveEmojis=function(e){return e.replace(i,function(e,t){return typeof s[t]==="string"?s[t]:e})};return e}();function $(e){var t="";for(var i=0;i<e.length;i++){t+=(i>0?i<e.length-1?", ":" & ":"")+e[i]}return t}function J(e){var t=new Date(e*1e3),i=initialState.config.dateFormat;var s=i.iso?t.getFullYear()+"-"+q(t.getMonth()+1)+"-"+q(t.getDate()):t.getDate()+" "+l[t.getMonth()]+" "+t.getFullYear();var n=q(t.getHours())+":"+q(t.getMinutes());var o;if(i.type===0){o=s+" "+n}else if(i.type===1){o=s}else{var r=Math.round((new Date).getTime()/1e3)-e,a=void 0;if(r<60){a="second"}else if(r<3600){a="minute";r/=60}else if(r<86400){a="hour";r/=3600}else if(r<604800){a="day";r/=86400}else if(r<2629800){a="week";r/=604800}else if(r<31557600){a="month";r/=2629800}else{a="year";r/=31557600}r=Math.round(r);o=r+" "+a+(r!==1?"s":"")+" ago"}return{title:s+" "+n+":"+q(t.getSeconds()),formatted:o}}function Q(e){var t=new Date(e*1e3);if(initialState.config.dateFormat.iso){var i=t.getTimezoneOffset();var s=Math.abs(i);var n=i===0?"Z":" "+(i<0?"+":"-")+q(Math.floor(s/60))+q(s%60);return t.getFullYear()+"-"+q(t.getMonth()+1)+"-"+q(t.getDate())+" "+q(t.getHours())+":"+q(t.getMinutes())+":"+q(t.getSeconds())+n}else{return t.toString()}}function ee(e,t,i){var s=L.getElementsByClassName(e),n;for(n=0;n<s.length;n++){s[n].addEventListener(t,i)}}function te(e,t){t.parentNode.insertBefore(e,t.nextSibling)}function ie(e,t,i){var s=null;for(var n=0;n<t.children.length;n++){if(t.children[n].classList.contains(i)){s=t.children[n];break}}t.insertBefore(e,s)}function se(e,t,i){if(e.classList.contains(t)!==i){if(i){e.classList.add(t)}else{e.classList.remove(t)}return true}return false}function ne(e){var t=[];for(var i=0;i<e.childNodes.length;i++){if(e.childNodes[i].childNodes.length>0){t.push.apply(t,ne(e.childNodes[i]))}else if(e.childNodes[i].textContent!==null&&e.childNodes[i].textContent!==""){t.push(e.childNodes[i])}}return t}function oe(e,t){var i=[];for(var s=0;s<e.children.length;s++){if(e.children[s].children.length>0){i.push.apply(i,oe(e.children[s],t))}else if(e.children[s].className===t){i.push(e.children[s])}}return i}function re(e){for(var t=0;t<e.children.length;t++){if(e.children[t].tagName==="UL"){return e.children[t]}}return null}function ae(e){t.postMessage(e)}function le(e){return L.documentElement.style.getPropertyValue(e)}var he=function(){function e(){this.canvas=null;this.context=null}e.prototype.resize=function(i,s){var n=this;if(this.canvas===null)this.canvas=L.createElement("canvas");if(this.context===null)this.context=this.canvas.getContext("2d");if(this.context===null){s(i);return}var o=new Image;o.onload=function(){var e="";if(n.canvas===null||n.context===null){e=i}else{var t=Math.ceil(18*c.devicePixelRatio);if(n.canvas.width!==t)n.canvas.width=t;if(n.canvas.height!==t)n.canvas.height=t;n.context.clearRect(0,0,t,t);n.context.drawImage(o,0,0,t,t);e=n.canvas.toDataURL()}s(e)};o.src=i};return e}();var e=function(){function e(){this.move=null;this.stop=null}e.prototype.create=function(e,t,i){if(L.getElementById(N)!==null)this.remove();var s=L.createElement("div");s.id=N;s.className=e;this.move=t;this.stop=i;if(this.move!==null){s.addEventListener("mousemove",this.move)}if(this.stop!==null){s.addEventListener("mouseup",this.stop);s.addEventListener("mouseleave",this.stop)}L.body.appendChild(s)};e.prototype.remove=function(){var e=L.getElementById(N);if(e===null)return;if(this.move!==null){e.removeEventListener("mousemove",this.move);this.move=null}if(this.stop!==null){e.removeEventListener("mouseup",this.stop);e.removeEventListener("mouseleave",this.stop);this.stop=null}L.body.removeChild(e)};return e}();var ce="contextMenuActive";var de=function(){function e(){var e=this;this.elem=null;this.target=null;var t=function(){return e.close()};L.addEventListener("click",t);L.addEventListener("contextmenu",t)}e.prototype.show=function(e,t,i,s){var n=this;var o=L.getElementById("view"),r="",a=[],l=0;if(o===null)return;this.close();for(var h=0;h<e.length;h++){var c="";for(var d=0;d<e[h].length;d++){if(e[h][d].visible){c+='<li class="contextMenuItem" data-index="'+l+++'">'+(t?'<span class="contextMenuItemCheck">'+(e[h][d].checked?S.check:"")+"</span>":"")+e[h][d].title+"</li>";a.push(e[h][d].onClick)}}if(c!==""){if(r!=="")r+='<li class="contextMenuDivider"></li>';r+=c}}if(a.length===0)return;var u=L.createElement("ul");u.className="contextMenu"+(t?" checked":"");u.style.opacity="0";u.innerHTML=r;o.appendChild(u);var m=u.getBoundingClientRect();var p=s.pageX+m.width<o.clientWidth?-2:s.pageX-m.width>0?2-m.width:-2-(m.width-(o.clientWidth-s.pageX));var f=s.pageY+m.height<o.clientHeight?-2:s.pageY-m.height>0?2-m.height:-2-(m.height-(o.clientHeight-s.pageY));u.style.left=o.scrollLeft+Math.max(s.pageX+p,2)+"px";u.style.top=o.scrollTop+Math.max(s.pageY+f,2)+"px";u.style.opacity="1";this.elem=u;ee("contextMenuItem","click",function(e){e.stopPropagation();n.close();a[parseInt(e.target.closest(".contextMenuItem").dataset.index)]()});this.target=i;if(this.target!==null&&this.target.type!=="repo"){se(this.target.elem,ce,true)}};e.prototype.close=function(){if(this.elem!==null){this.elem.remove();this.elem=null}if(this.target!==null&&this.target.type!=="repo"){se(this.target.elem,ce,false)}this.target=null};e.prototype.refresh=function(e){if(!this.isOpen()||this.target===null||this.target.type==="repo"){return}if(this.target.index<e.length&&e[this.target.index].hash===this.target.hash){var t=Je(L.getElementsByClassName("commit"),this.target.index);if(t!==null){if(typeof this.target.ref==="undefined"){this.target.elem=t;se(this.target.elem,ce,true);return}else{var i=t.querySelectorAll("[data-fullref]");for(var s=0;s<i.length;s++){if(i[s].dataset.fullref===this.target.ref){this.target.elem=this.target.type==="ref"?i[s]:t;se(this.target.elem,ce,true);return}}}}}this.close()};e.prototype.isOpen=function(){return this.elem!==null};e.prototype.isTargetDynamicSource=function(){return this.isOpen()&&this.target!==null};return e}();var ue="dialogActive";var me="inputInvalid";var pe="noInput";var fe=function(){function e(){this.elem=null;this.target=null;this.actioned=null;this.type=null;this.customSelects=[]}e.prototype.showConfirmation=function(e,t,i){var s=this;this.show(0,e,"Yes","No",function(){s.close();t()},null,i)};e.prototype.showTwoButtons=function(e,t,i,s,n,o){var r=this;this.show(0,e,t,s,function(){r.close();i()},function(){r.close();n()},o)};e.prototype.showRefInput=function(e,t,i,s,n){this.showForm(e,[{type:1,name:"",default:t}],i,function(e){return s(e[0])},n)};e.prototype.showCheckbox=function(e,t,i,s,n,o){this.showForm(e,[{type:4,name:t,value:i}],s,function(e){return n(e[0])},o)};e.prototype.showSelect=function(e,t,i,s,n,o){this.showForm(e,[{type:2,name:"",options:i,default:t}],s,function(e){return n(e[0])},o)};e.prototype.showForm=function(e,t,i,s,n,o){var r=this;if(o===void 0){o=true}var a=t.length>1;var l=a&&t.every(function(e){return e.type===4});var h=t.some(function(e){return e.type!==4&&e.type!==3&&e.info});var c=t.map(function(i,s){var e;if(i.type===3){e='<td class="inputCol"'+(h?' colspan="2"':"")+'><span class="dialogFormRadio">'+i.options.map(function(e,t){return'<label><input type="radio" name="dialogInput'+s+'" value="'+t+'"'+(e.value===i.default?" checked":"")+' tabindex="'+(s+1)+'"/><span class="customRadio"></span>'+Z(e.name)+"</label>"}).join("<br>")+"</span></td>"}else{var t=i.info?'<span class="dialogInfo" title="'+Z(i.info)+'">'+S.info+"</span>":"";if(i.type===2){e='<td class="inputCol"><div id="dialogFormSelect'+s+'"></div></td>'+(h?"<td>"+t+"</td>":"")}else if(i.type===4){e='<td class="inputCol"'+(h?' colspan="2"':"")+'><span class="dialogFormCheckbox"><label><input id="dialogInput'+s+'" type="checkbox"'+(i.value?" checked":"")+' tabindex="'+(s+1)+'"/><span class="customCheckbox"></span>'+(a&&!l?"":i.name)+t+"</label></span></td>"}else{e='<td class="inputCol"><input id="dialogInput'+s+'" type="text" value="'+Z(i.default)+'"'+(i.type===0&&i.placeholder!==null?' placeholder="'+Z(i.placeholder)+'"':"")+' tabindex="'+(s+1)+'"/></td>'+(h?"<td>"+t+"</td>":"")}}return"<tr"+(i.type===3?' class="mediumField"':i.type!==4?' class="largeField"':"")+">"+(a&&!l?"<td>"+i.name+": </td>":"")+e+"</tr>"});var d=e+(o?"<br>":"")+'<table class="dialogForm '+(a?l?"multiCheckbox":"multi":"single")+'">'+c.join("")+"</table>";this.show(0,d,i,"Cancel",function(){if(r.elem===null||r.elem.classList.contains(pe)||r.elem.classList.contains(me))return;var e=t.map(function(e,t){if(e.type===3){var i=L.getElementsByName("dialogInput"+t);for(var s=0;s<i.length;s++){if(i[s].checked){return e.options[parseInt(i[s].value)].value}}return e.default}else{var n=L.getElementById("dialogInput"+t);return e.type===4?n.checked:n.value}});r.close();s(e)},null,n);var u=[];t.forEach(function(e,t){if(e.type===2){u.push(t)}});this.customSelects=u.map(function(e){return new ge(t[e],"dialogFormSelect"+e,"dialogInput"+e,e+1,r.elem)});var m=t.findIndex(function(e){return e.type===1});if(m>-1){var p=L.getElementById("dialogInput"+m),f=L.getElementById("dialogAction");if(p.value==="")this.elem.classList.add(pe);p.addEventListener("keyup",function(){if(r.elem===null)return;var e=p.value==="",t=p.value.match(g)!==null;se(r.elem,pe,e);if(se(r.elem,me,!e&&t)){f.title=t?"Unable to "+i+", one or more invalid characters entered.":""}})}if(t.length>0&&(t[0].type===0||t[0].type===1)){L.getElementById("dialogInput0").focus()}};e.prototype.showMessage=function(e){this.show(2,e,null,"Close",null,null,null)};e.prototype.showError=function(e,t,i,s){var n=this;this.show(2,'<span class="dialogAlert">'+S.alert+"Error: "+e+"</span>"+(t!==null?'<br><span class="messageContent errorContent">'+Z(t).split("\n").join("<br>")+"</span>":""),i,"Dismiss",function(){n.close();if(s!==null)s()},null,null)};e.prototype.showActionRunning=function(e){this.show(1,'<span class="actionRunning">'+S.loading+e+" ...</span>",null,"Dismiss",null,null,null)};e.prototype.show=function(e,t,i,s,n,o,r){var a=this;et();this.type=e;this.target=r;Ae.create("dialogBacking",null,null);var l=L.createElement("div"),h=L.createElement("div");l.className="dialog";h.className="dialogContent";h.innerHTML=t+"<br>"+(i!==null?'<div id="dialogAction" class="roundedBtn">'+i+"</div>":"")+'<div id="dialogDismiss" class="roundedBtn">'+s+"</div>";l.appendChild(h);this.elem=l;L.body.appendChild(l);var c=L.body.clientHeight,d=l.clientHeight+2;if(e!==0&&d>.8*c){h.style.height=Math.round(.8*c-22)+"px";d=Math.round(.8*c)}l.style.top=Math.max(Math.round((c-d)/2),10)+"px";if(i!==null&&n!==null){L.getElementById("dialogAction").addEventListener("click",n);this.actioned=n}L.getElementById("dialogDismiss").addEventListener("click",o!==null?o:function(){return a.close()});if(this.target!==null&&this.target.type!=="repo"){se(this.target.elem,ue,true)}};e.prototype.close=function(){Ae.remove();if(this.elem!==null){this.elem.remove();this.elem=null}if(this.target!==null&&this.target.type!=="repo"){se(this.target.elem,ue,false)}this.target=null;this.customSelects.forEach(function(e){return e.remove()});this.customSelects=[];this.actioned=null;this.type=null};e.prototype.closeActionRunning=function(){if(this.type===1)this.close()};e.prototype.submit=function(){if(this.actioned!==null)this.actioned()};e.prototype.refresh=function(e){var t=this;if(!this.isOpen()||this.target===null||this.target.type==="repo"){return}var i=e.findIndex(function(e){return e.hash===t.target.hash});if(i>-1){var s=Je(L.getElementsByClassName("commit"),i);if(s!==null){if(typeof this.target.ref==="undefined"){this.target.elem=s;se(this.target.elem,ue,true);return}else{var n=s.querySelectorAll("[data-fullref]");for(var o=0;o<n.length;o++){if(n[o].dataset.fullref===this.target.ref){this.target.elem=this.target.type==="ref"?n[o]:s;se(this.target.elem,ue,true);return}}}}}this.close()};e.prototype.isOpen=function(){return this.elem!==null};e.prototype.isTargetDynamicSource=function(){return this.isOpen()&&this.target!==null};e.prototype.getType=function(){return this.type};return e}();var ge=function(){function e(t,e,i,s,n){var o=this;this.optionsElem=null;this.data=t;this.open=false;this.dialogElem=n;var r=L.getElementById(e);r.className="customSelectContainer";this.elem=r;var a=L.createElement("div");a.className="customSelectCurrent";a.tabIndex=s;this.currentElem=a;r.appendChild(a);var l=L.createElement("input");l.className="customSelectValue";l.id=i;l.type="hidden";this.valueElem=l;r.appendChild(l);this.clickHandler=function(e){if(!e.target)return;var t=e.target;if(t.closest(".customSelectContainer")!==o.elem&&(o.optionsElem===null||t.closest(".customSelectOptions")!==o.optionsElem)){o.render(false);return}if(t.className==="customSelectCurrent"){o.render(!o.open)}else if(o.open&&t.classList.contains("customSelectOption")){o.setSelectedItem(parseInt(t.dataset.index));o.render(false)}};L.addEventListener("click",this.clickHandler,true);a.addEventListener("keydown",function(e){if(o.open&&e.key==="Tab"){o.render(false)}else if(o.open&&(e.key==="Enter"||e.key==="Escape")){o.render(false);e.stopPropagation()}else if(e.key==="ArrowUp"||e.key==="ArrowLeft"){o.setSelectedItem(o.selectedItem>0?o.selectedItem-1:o.data.options.length-1)}else if(e.key==="ArrowDown"||e.key==="ArrowRight"){o.setSelectedItem(o.selectedItem<o.data.options.length-1?o.selectedItem+1:0)}});var h=t.options.findIndex(function(e){return e.value===t.default});this.setSelectedItem(h>-1?h:0)}e.prototype.remove=function(){this.dialogElem=null;if(this.elem!==null){this.elem.remove();this.elem=null}if(this.currentElem!==null){this.currentElem.remove();this.currentElem=null}if(this.valueElem!==null){this.valueElem.remove();this.valueElem=null}if(this.optionsElem!==null){this.optionsElem.remove();this.optionsElem=null}if(this.clickHandler!==null){L.removeEventListener("click",this.clickHandler,true);this.clickHandler=null}};e.prototype.setSelectedItem=function(e){if(this.currentElem===null||this.valueElem===null)return;this.selectedItem=e;this.currentElem.innerHTML=Z(this.data.options[e].name);this.valueElem.value=this.data.options[e].value;if(this.optionsElem!==null){var t=this.optionsElem.children;for(var i=0;i<t.length;i++){se(t[i],"selected",parseInt(t[i].dataset.index)===e)}}};e.prototype.render=function(e){if(this.elem===null||this.currentElem===null||this.dialogElem===null)return;if(this.open!==e){this.open=e;if(e){var t=this.optionsElem===null?L.createElement("div"):this.optionsElem;var i=this.currentElem.getBoundingClientRect(),s=this.dialogElem.getBoundingClientRect();t.style.top=i.top-s.top+i.height-2+"px";t.style.left=i.left-s.left-1+"px";t.style.width=i.width+"px";if(this.optionsElem===null){t.className="customSelectOptions";this.optionsElem=t;this.dialogElem.appendChild(t)}}else if(this.optionsElem!==null){this.optionsElem.remove();this.optionsElem=null}se(this.elem,"open",e)}if(this.optionsElem!==null){var n="";for(var o=0;o<this.data.options.length;o++){n+='<div class="customSelectOption'+(this.selectedItem===o?" selected":"")+'" data-index="'+o+'">'+Z(this.data.options[o].name)+"</div>"}this.optionsElem.innerHTML=n}};return e}();var ve=function(){function e(e,t,i,s,n){var o=this;this.options=[];this.optionsSelected=[];this.lastSelected=0;this.numSelected=0;this.dropdownVisible=false;this.lastClicked=0;this.doubleClickTimeout=null;this.showInfo=t;this.multipleAllowed=i;this.changeCallback=n;this.elem=L.getElementById(e);this.menuElem=L.createElement("div");this.menuElem.className="dropdownMenu";var r=this.menuElem.appendChild(L.createElement("div"));r.className="dropdownFilter";this.filterInput=r.appendChild(L.createElement("input"));this.filterInput.className="dropdownFilterInput";this.filterInput.placeholder="Filter "+s+"...";this.optionsElem=this.menuElem.appendChild(L.createElement("div"));this.optionsElem.className="dropdownOptions";this.noResultsElem=this.menuElem.appendChild(L.createElement("div"));this.noResultsElem.className="dropdownNoResults";this.noResultsElem.innerHTML="No results found.";this.currentValueElem=this.elem.appendChild(L.createElement("div"));this.currentValueElem.className="dropdownCurrentValue";se(this.elem,"multi",i);this.elem.appendChild(this.menuElem);L.addEventListener("click",function(e){if(!e.target)return;if(e.target===o.currentValueElem){o.dropdownVisible=!o.dropdownVisible;if(o.dropdownVisible){o.filterInput.value="";o.filter()}o.elem.classList.toggle("dropdownOpen");if(o.dropdownVisible)o.filterInput.focus()}else if(o.dropdownVisible){if(e.target.closest(".dropdown")!==o.elem){o.close()}else{var t=e.target.closest(".dropdownOption");if(t!==null&&t.parentNode===o.optionsElem&&typeof t.dataset.id!=="undefined"){o.selectOption(parseInt(t.dataset.id))}}}},true);L.addEventListener("contextmenu",function(){return o.close()},true);L.addEventListener("keyup",function(e){if(e.key==="Escape")o.close()},true);this.filterInput.addEventListener("keyup",function(){return o.filter()})}e.prototype.setOptions=function(e,t){this.options=e;this.optionsSelected=[];this.numSelected=0;var i=-1,s;for(var n=0;n<e.length;n++){s=t.includes(e[n].value);this.optionsSelected[n]=s;if(s){i=n;this.numSelected++}}if(i===-1){i=0;this.optionsSelected[i]=true;this.numSelected++}this.lastSelected=i;if(this.dropdownVisible&&e.length<=1)this.close();this.render();this.clearDoubleClickTimeout()};e.prototype.refresh=function(){if(this.options.length>0)this.render()};e.prototype.render=function(){this.elem.classList.add("loaded");var e=this.getCurrentValueText();this.currentValueElem.title=e;this.currentValueElem.innerHTML=Z(e);var t="";for(var i=0;i<this.options.length;i++){var s=Z(this.options[i].name);t+='<div class="dropdownOption'+(this.optionsSelected[i]?" selected":"")+'" data-id="'+i+'" title="'+s+'">'+(this.multipleAllowed&&this.optionsSelected[i]?'<div class="dropdownOptionMultiSelected">'+S.check+"</div>":"")+s+(typeof this.options[i].hint==="string"&&this.options[i].hint!==""?'<span class="dropdownOptionHint">'+Z(this.options[i].hint)+"</span>":"")+(this.showInfo?'<div class="dropdownOptionInfo" title="'+Z(this.options[i].value)+'">'+S.info+"</div>":"")+"</div>"}this.optionsElem.className="dropdownOptions"+(this.showInfo?" showInfo":"");this.optionsElem.innerHTML=t;this.filterInput.style.display="none";this.noResultsElem.style.display="none";this.menuElem.style.cssText="opacity:0; display:block;";var n=this.menuElem.getBoundingClientRect();this.currentValueElem.style.width=Math.max(Math.ceil(n.width)+((this.showInfo||this.multipleAllowed)&&n.height<272?0:12),138)+"px";this.menuElem.style.cssText="right:0; overflow-y:auto; max-height:297px;";if(this.dropdownVisible)this.filter()};e.prototype.filter=function(){var e=this.filterInput.value.toLowerCase(),t,i=false;for(var s=0;s<this.options.length;s++){t=this.options[s].name.toLowerCase().indexOf(e)>-1;this.optionsElem.children[s].style.display=t?"block":"none";if(t)i=true}this.filterInput.style.display="block";this.noResultsElem.style.display=i?"none":"block"};e.prototype.close=function(){this.elem.classList.remove("dropdownOpen");this.dropdownVisible=false;this.clearDoubleClickTimeout()};e.prototype.getSelectedOptions=function(e){var t=[];if(this.multipleAllowed&&this.optionsSelected[0]){return[e?this.options[0].name:this.options[0].value]}for(var i=0;i<this.options.length;i++){if(this.optionsSelected[i])t.push(e?this.options[i].name:this.options[i].value)}return t};e.prototype.getCurrentValueText=function(){var e="",t=this.getSelectedOptions(true);for(var i=0;i<t.length;i++){e+=(i>0?i<t.length-1?", ":" & ":"")+t[i]}return e};e.prototype.selectOption=function(e){var t=this;var i=false;var s=this.doubleClickTimeout!==null&&this.lastClicked===e;if(this.doubleClickTimeout!==null)this.clearDoubleClickTimeout();if(s){if(this.multipleAllowed&&e===0){this.numSelected=1;for(var n=1;n<this.optionsSelected.length;n++){this.optionsSelected[n]=!this.optionsSelected[n];if(this.optionsSelected[n])this.numSelected++}i=true}}else{if(this.multipleAllowed){if(e===0){if(!this.optionsSelected[0]){this.optionsSelected[0]=true;for(var n=1;n<this.optionsSelected.length;n++){this.optionsSelected[n]=false}this.numSelected=1;i=true}}else{if(this.optionsSelected[0]){this.optionsSelected[0]=false;this.numSelected--}this.numSelected+=this.optionsSelected[e]?-1:1;this.optionsSelected[e]=!this.optionsSelected[e];if(this.numSelected===0){this.optionsSelected[0]=true;this.numSelected=1}i=true}if(i&&this.optionsSelected[e]){this.lastSelected=e}}else{this.close();if(this.lastSelected!==e){this.optionsSelected[this.lastSelected]=false;this.optionsSelected[e]=true;this.lastSelected=e;i=true}}if(i){this.changeCallback(this.getSelectedOptions(false))}}if(i){var o=this.menuElem.scrollTop;this.render();if(this.dropdownVisible)this.menuElem.scroll(0,o)}this.lastClicked=e;this.doubleClickTimeout=setTimeout(function(){t.clearDoubleClickTimeout()},500)};e.prototype.clearDoubleClickTimeout=function(){if(this.doubleClickTimeout!==null){clearTimeout(this.doubleClickTimeout);this.doubleClickTimeout=null}};return e}();var Ce="findCurrentCommit";var ye="findMatch";var be=function(){function e(e){var t=this;this.text="";this.isCaseSensitive=false;this.isRegex=false;this.matches=[];this.position=-1;this.visible=false;this.view=e;this.widgetElem=L.createElement("div");this.widgetElem.className="findWidget";this.widgetElem.innerHTML='<input id="findInput" type="text" placeholder="Find" disabled/><span id="findCaseSensitive" class="findModifer" title="Match Case">Aa</span><span id="findRegex" class="findModifer" title="Use Regular Expression">.*</span><span id="findPosition"></span><span id="findPrev" title="Previous match (Shift+Enter)"></span><span id="findNext" title="Next match (Enter)"></span><span id="findClose" title="Close (Escape)"></span>';L.body.appendChild(this.widgetElem);this.inputElem=L.getElementById("findInput");var i=null;this.inputElem.addEventListener("keyup",function(e){if(e.key==="Enter"&&t.text!==""){if(e.shiftKey){t.prev()}else{t.next()}}else{if(i!==null)clearTimeout(i);i=setTimeout(function(){i=null;if(t.text!==t.inputElem.value){t.text=t.inputElem.value;t.clearMatches();t.findMatches(t.getCurrentHash(),true)}},200)}});this.caseSensitiveElem=L.getElementById("findCaseSensitive");this.caseSensitiveElem.addEventListener("click",function(){t.isCaseSensitive=!t.isCaseSensitive;se(t.caseSensitiveElem,f,t.isCaseSensitive);t.clearMatches();t.findMatches(t.getCurrentHash(),true)});this.regexElem=L.getElementById("findRegex");this.regexElem.addEventListener("click",function(){t.isRegex=!t.isRegex;se(t.regexElem,f,t.isRegex);t.clearMatches();t.findMatches(t.getCurrentHash(),true)});this.positionElem=L.getElementById("findPosition");this.prevElem=L.getElementById("findPrev");this.prevElem.classList.add(T);this.prevElem.innerHTML=S.arrowUp;this.prevElem.addEventListener("click",function(){return t.prev()});this.nextElem=L.getElementById("findNext");this.nextElem.classList.add(T);this.nextElem.innerHTML=S.arrowDown;this.nextElem.addEventListener("click",function(){return t.next()});var s=L.getElementById("findClose");s.innerHTML=S.close;s.addEventListener("click",function(){return t.close()})}e.prototype.show=function(e){if(!this.visible){this.visible=true;this.inputElem.value=this.text;this.inputElem.disabled=false;this.updatePosition(-1,false);se(this.widgetElem,U,e);this.widgetElem.classList.add(f)}this.inputElem.focus()};e.prototype.close=function(){if(!this.visible)return;this.visible=false;this.widgetElem.classList.add(U);this.widgetElem.classList.remove(f);this.clearMatches();this.text="";this.matches=[];this.position=-1;this.inputElem.value=this.text;this.inputElem.disabled=true;this.widgetElem.removeAttribute(z);this.prevElem.classList.add(T);this.nextElem.classList.add(T);this.view.saveState()};e.prototype.refresh=function(){if(this.visible){this.findMatches(this.getCurrentHash(),false)}};e.prototype.setColour=function(e){L.body.style.setProperty("--git-graph-findMatch",e);L.body.style.setProperty("--git-graph-findMatchCommit",_(e,.5))};e.prototype.getState=function(){return{text:this.text,isCaseSensitive:this.isCaseSensitive,isRegex:this.isRegex,currentHash:this.getCurrentHash(),visible:this.visible}};e.prototype.getCurrentHash=function(){return this.position>-1?this.matches[this.position].hash:null};e.prototype.restoreState=function(e){if(!e.visible)return;this.text=e.text;this.isCaseSensitive=e.isCaseSensitive;this.isRegex=e.isRegex;se(this.caseSensitiveElem,f,this.isCaseSensitive);se(this.regexElem,f,this.isRegex);this.show(false);if(this.text!=="")this.findMatches(e.currentHash,false)};e.prototype.isVisible=function(){return this.visible};e.prototype.findMatches=function(t,e){this.matches=[];this.position=-1;if(this.text!==""){var i=this.view.getColumnVisibility(),s,n=void 0,o=this.isRegex?this.text:this.text.replace(/[\\\[\](){}|.*+?^$]/g,"\\$&"),r="u"+(this.isCaseSensitive?"":"i");try{s=new RegExp(o,r);n=new RegExp(o,"g"+r);this.widgetElem.removeAttribute(z)}catch(e){s=null;n=null;this.widgetElem.setAttribute(z,e.message)}if(s!==null&&n!==null){var a=L.getElementsByClassName("commit"),l=0,h=void 0,c=false;var d=this.view.getCommits();for(var u=0;u<d.length;u++){h=d[u];var m=$e(h.heads,h.remotes);if(h.hash!==B&&(i.author&&s.test(h.author)||i.commit&&(h.hash.search(s)===0||s.test(Ze(h.hash)))||s.test(h.message)||m.heads.some(function(e){return s.test(e.name)||e.remotes.some(function(e){return s.test(e)})})||m.remotes.some(function(e){return s.test(e.name)})||h.tags.some(function(e){return s.test(e.name)})||i.date&&s.test(J(h.date).formatted)||h.stash!==null&&s.test(h.stash.selector))){var p=u.toString();while(l<a.length&&a[l].dataset.id!==p)l++;if(l===a.length)continue;this.matches.push({hash:h.hash,elem:a[l]});var f=ne(a[l]),g=void 0;for(var v=0;v<f.length;v++){g=f[v];var C=0,y=0,b=g.textContent,w=void 0;n.lastIndex=0;while(w=n.exec(b)){if(w[0].length===0){c=true;break}if(y!==w.index){if(C!==y)g.parentNode.insertBefore(we(b.substring(C,y)),g);g.parentNode.insertBefore(L.createTextNode(b.substring(y,w.index)),g);C=w.index}y=n.lastIndex}if(y>0){if(C!==y)g.parentNode.insertBefore(we(b.substring(C,y)),g);if(y!==b.length){g.textContent=b.substring(y)}else{g.parentNode.removeChild(g)}}if(c)break}if(i.commit&&h.hash.search(s)===0&&!s.test(Ze(h.hash))&&f.length>0){var R=f[f.length-1];R.parentNode.replaceChild(we(R.textContent),R)}if(c)break}}if(c){this.widgetElem.setAttribute(z,"Cannot use a regular expression which has zero length matches");this.clearMatches();this.matches=[]}}}else{this.widgetElem.removeAttribute(z)}se(this.prevElem,T,this.matches.length===0);se(this.nextElem,T,this.matches.length===0);var x=-1;if(this.matches.length>0){x=0;if(t!==null){var E=this.matches.findIndex(function(e){return e.hash===t});if(E>-1)x=E}}this.updatePosition(x,e)};e.prototype.clearMatches=function(){for(var e=0;e<this.matches.length;e++){if(e===this.position)this.matches[e].elem.classList.remove(Ce);var t=oe(this.matches[e].elem,ye),i=void 0;for(var s=0;s<t.length;s++){i=t[s];var n=i.childNodes[0].textContent;var o=i.previousSibling,r=i.previousElementSibling;while(o!==null&&o!==r&&o.textContent!==null){n=o.textContent+n;i.parentNode.removeChild(o);o=i.previousSibling}o=i.nextSibling;r=i.nextElementSibling;while(o!==null&&o!==r&&o.textContent!==null){n=n+o.textContent;i.parentNode.removeChild(o);o=i.nextSibling}i.parentNode.replaceChild(L.createTextNode(n),i)}}};e.prototype.updatePosition=function(e,t){if(this.position>-1)this.matches[this.position].elem.classList.remove(Ce);this.position=e;if(this.position>-1){this.matches[this.position].elem.classList.add(Ce);if(t)this.view.scrollToCommit(this.matches[e].hash,false)}this.positionElem.innerHTML=this.matches.length>0?this.position+1+" of "+this.matches.length:"No Results";this.view.saveState()};e.prototype.prev=function(){if(this.matches.length===0)return;this.updatePosition(this.position>0?this.position-1:this.matches.length-1,true)};e.prototype.next=function(){if(this.matches.length===0)return;this.updatePosition(this.position<this.matches.length-1?this.position+1:0,true)};return e}();function we(e){var t=L.createElement("span");t.className=ye;t.innerHTML=e;return t}var Re="graphVertexActive";var xe=-1;var Ee=function(){function e(e){this.end=0;this.lines=[];this.numUncommitted=0;this.colour=e}e.prototype.addLine=function(e,t,i,s){this.lines.push({p1:e,p2:t,lockedFirst:s});if(i){if(t.x===0&&t.y<this.numUncommitted)this.numUncommitted=t.y}else{this.numUncommitted++}};e.prototype.getColour=function(){return this.colour};e.prototype.getEnd=function(){return this.end};e.prototype.setEnd=function(e){this.end=e};e.prototype.draw=function(e,t,i){var s=t.graphColours[this.colour%t.graphColours.length],n,o,r,a,l,h=[],c="",d="",u=t.grid.y*(t.graphStyle===1?.38:.8),m,p;for(n=0;n<this.lines.length;n++){m=this.lines[n];o=m.p1.x*t.grid.x+t.grid.offsetX;r=m.p1.y*t.grid.y+t.grid.offsetY;a=m.p2.x*t.grid.x+t.grid.offsetX;l=m.p2.y*t.grid.y+t.grid.offsetY;if(i>-1){if(m.p1.y>i){r+=t.grid.expandY;l+=t.grid.expandY}else if(m.p2.y>i){if(o===a){l+=t.grid.expandY}else if(m.lockedFirst){h.push({p1:{x:o,y:r},p2:{x:a,y:l},isCommitted:n>=this.numUncommitted,lockedFirst:m.lockedFirst});h.push({p1:{x:a,y:r+t.grid.y},p2:{x:a,y:l+t.grid.expandY},isCommitted:n>=this.numUncommitted,lockedFirst:m.lockedFirst});continue}else{h.push({p1:{x:o,y:r},p2:{x:o,y:l-t.grid.y+t.grid.expandY},isCommitted:n>=this.numUncommitted,lockedFirst:m.lockedFirst});r+=t.grid.expandY;l+=t.grid.expandY}}}h.push({p1:{x:o,y:r},p2:{x:a,y:l},isCommitted:n>=this.numUncommitted,lockedFirst:m.lockedFirst})}n=0;while(n<h.length-1){m=h[n];p=h[n+1];if(m.p1.x===m.p2.x&&m.p2.x===p.p1.x&&p.p1.x===p.p2.x&&m.p2.y===p.p1.y&&m.isCommitted===p.isCommitted){m.p2.y=p.p2.y;h.splice(n+1,1)}else{n++}}for(n=0;n<h.length;n++){m=h[n];o=m.p1.x;r=m.p1.y;a=m.p2.x;l=m.p2.y;if(c!==""&&n>0&&m.isCommitted!==h[n-1].isCommitted){this.drawPath(e,c,d);c="";d=""}if(c===""||n>0&&(o!==h[n-1].p2.x||r!==h[n-1].p2.y))c+="M"+o.toFixed(0)+","+r.toFixed(1);if(d==="")d=m.isCommitted?s:"#808080";if(o===a){c+="L"+a.toFixed(0)+","+l.toFixed(1)}else{if(t.graphStyle===1){c+="L"+(m.lockedFirst?a.toFixed(0)+","+(l-u).toFixed(1):o.toFixed(0)+","+(r+u).toFixed(1))+"L"+a.toFixed(0)+","+l.toFixed(1)}else{c+="C"+o.toFixed(0)+","+(r+u).toFixed(1)+" "+a.toFixed(0)+","+(l-u).toFixed(1)+" "+a.toFixed(0)+","+l.toFixed(1)}}}if(c!==""){this.drawPath(e,c,d)}};e.prototype.drawPath=function(e,t,i){var s=e.appendChild(L.createElementNS(m,"path")),n=e.appendChild(L.createElementNS(m,"path"));s.setAttribute("class","shadow");s.setAttribute("d",t);n.setAttribute("class","line");n.setAttribute("d",t);n.setAttribute("stroke",i)};return e}();var ke=function(){function e(e,t){this.x=0;this.children=[];this.parents=[];this.nextParent=0;this.onBranch=null;this.isCommitted=true;this.isCurrent=false;this.nextX=0;this.connections=[];this.id=e;this.isStash=t}e.prototype.addChild=function(e){this.children.push(e)};e.prototype.getChildren=function(){return this.children};e.prototype.addParent=function(e){this.parents.push(e)};e.prototype.getParents=function(){return this.parents};e.prototype.hasParents=function(){return this.parents.length>0};e.prototype.getNextParent=function(){if(this.nextParent<this.parents.length)return this.parents[this.nextParent];return null};e.prototype.getLastParent=function(){if(this.nextParent<1)return null;return this.parents[this.nextParent-1]};e.prototype.registerParentProcessed=function(){this.nextParent++};e.prototype.isMerge=function(){return this.parents.length>1};e.prototype.addToBranch=function(e,t){if(this.onBranch===null){this.onBranch=e;this.x=t}};e.prototype.isNotOnBranch=function(){return this.onBranch===null};e.prototype.isOnThisBranch=function(e){return this.onBranch===e};e.prototype.getBranch=function(){return this.onBranch};e.prototype.getPoint=function(){return{x:this.x,y:this.id}};e.prototype.getNextPoint=function(){return{x:this.nextX,y:this.id}};e.prototype.getPointConnectingTo=function(e,t){for(var i=0;i<this.connections.length;i++){if(this.connections[i].connectsTo===e&&this.connections[i].onBranch===t){return{x:i,y:this.id}}}return null};e.prototype.registerUnavailablePoint=function(e,t,i){if(e===this.nextX){this.nextX=e+1;this.connections[e]={connectsTo:t,onBranch:i}}};e.prototype.getColour=function(){return this.onBranch!==null?this.onBranch.getColour():0};e.prototype.getIsCommitted=function(){return this.isCommitted};e.prototype.setNotCommited=function(){this.isCommitted=false};e.prototype.setCurrent=function(){this.isCurrent=true};e.prototype.draw=function(e,t,i,s,n){if(this.onBranch===null)return;var o=this.isCommitted?t.graphColours[this.onBranch.getColour()%t.graphColours.length]:"#808080";var r=(this.x*t.grid.x+t.grid.offsetX).toString();var a=(this.id*t.grid.y+t.grid.offsetY+(i?t.grid.expandY:0)).toString();var l=L.createElementNS(m,"circle");l.dataset.id=this.id.toString();l.setAttribute("cx",r);l.setAttribute("cy",a);l.setAttribute("r","4");if(this.isCurrent){l.setAttribute("class","current");l.setAttribute("stroke",o)}else{l.setAttribute("fill",o)}e.appendChild(l);if(this.isStash&&!this.isCurrent){l.setAttribute("r","4.5");l.setAttribute("class","stashOuter");var h=L.createElementNS(m,"circle");h.setAttribute("cx",r);h.setAttribute("cy",a);h.setAttribute("r","2");h.setAttribute("class","stashInner");e.appendChild(h)}l.addEventListener("mouseover",s);l.addEventListener("mouseout",n)};return e}();var Le=function(){function e(e,t,i){this.vertices=[];this.branches=[];this.availableColours=[];this.maxWidth=-1;this.commits=[];this.commitHead=null;this.commitLookup={};this.expandedCommitId=-1;this.group=null;this.tooltipId=-1;this.tooltipElem=null;this.tooltipTimeout=null;this.tooltipVertex=null;this.viewElem=t;this.config=i;var s=L.getElementById(e);this.contentElem=s.parentElement;this.svg=L.createElementNS(m,"svg");var n=this.svg.appendChild(L.createElementNS(m,"defs"));var o=n.appendChild(L.createElementNS(m,"linearGradient"));o.setAttribute("id","GraphGradient");this.gradientStop1=o.appendChild(L.createElementNS(m,"stop"));this.gradientStop1.setAttribute("stop-color","white");this.gradientStop2=o.appendChild(L.createElementNS(m,"stop"));this.gradientStop2.setAttribute("stop-color","black");var r=n.appendChild(L.createElementNS(m,"mask"));r.setAttribute("id","GraphMask");this.maskRect=r.appendChild(L.createElementNS(m,"rect"));this.maskRect.setAttribute("fill","url(#GraphGradient)");this.setDimensions(0,0);s.appendChild(this.svg)}e.prototype.loadCommits=function(e,t,i){this.commits=e;this.commitHead=t;this.commitLookup=i;this.vertices=[];this.branches=[];this.availableColours=[];if(e.length===0)return;var s=new ke(xe,false);var n,o;for(n=0;n<e.length;n++){this.vertices.push(new ke(n,e[n].stash!==null))}for(n=0;n<e.length;n++){for(o=0;o<e[n].parents.length;o++){var r=e[n].parents[o];if(typeof i[r]==="number"){this.vertices[n].addParent(this.vertices[i[r]]);this.vertices[i[r]].addChild(this.vertices[n])}else{this.vertices[n].addParent(s)}}}if(e[0].hash===B){this.vertices[0].setCurrent();this.vertices[0].setNotCommited()}else if(t!==null&&typeof i[t]==="number"){this.vertices[i[t]].setCurrent()}n=0;while(n<this.vertices.length){if(this.vertices[n].getNextParent()!==null||this.vertices[n].isNotOnBranch()){this.determinePath(n)}else{n++}}};e.prototype.render=function(e){var t=this;this.expandedCommitId=e!==null?e.id:-1;var i=L.createElementNS(m,"g"),s,n=this.getContentWidth();i.setAttribute("mask","url(#GraphMask)");for(s=0;s<this.branches.length;s++){this.branches[s].draw(i,this.config,this.expandedCommitId)}var o=function(e){return t.vertexOver(e)},r=function(e){return t.vertexOut(e)};for(s=0;s<this.vertices.length;s++){this.vertices[s].draw(i,this.config,e!==null&&s>e.id,o,r)}if(this.group!==null)this.svg.removeChild(this.group);this.svg.appendChild(i);this.group=i;this.setDimensions(n,this.getHeight(e));this.applyMaxWidth(n);this.closeTooltip()};e.prototype.getContentWidth=function(){var e=0,t,i;for(t=0;t<this.vertices.length;t++){i=this.vertices[t].getNextPoint();if(i.x>e)e=i.x}return 2*this.config.grid.offsetX+(e-1)*this.config.grid.x};e.prototype.getHeight=function(e){return this.vertices.length*this.config.grid.y+this.config.grid.offsetY-this.config.grid.y/2+(e!==null?this.config.grid.expandY:0)};e.prototype.getVertexColours=function(){var e=[],t;for(t=0;t<this.vertices.length;t++){e[t]=this.vertices[t].getColour()%this.config.graphColours.length}return e};e.prototype.getWidthsAtVertices=function(){var e=[],t;for(t=0;t<this.vertices.length;t++){e[t]=this.config.grid.offsetX+this.vertices[t].getNextPoint().x*this.config.grid.x-2}return e};e.prototype.dropCommitPossible=function(e){if(!this.vertices[e].hasParents()){return false}var i=function(e){if(e.isMerge()){return false}var t=e.getChildren();if(t.length>1){return false}else if(t.length===1&&!i(t[0])){return false}return true};return i(this.vertices[e])};e.prototype.getAllChildren=function(e){var n={};var o=function(e){var t=e.id.toString();if(typeof n[t]!=="undefined")return;n[t]=e.id;var i=e.getChildren();for(var s=0;s<i.length;s++)o(i[s])};o(this.vertices[e]);return Object.keys(n).map(function(e){return n[e]}).sort(function(e,t){return e-t})};e.prototype.getMutedCommits=function(e){var t=[];for(var i=0;i<this.commits.length;i++){t[i]=false}if(this.config.muteMergeCommits){for(var i=0;i<this.commits.length;i++){if(this.commits[i].parents.length>1&&this.commits[i].stash===null){t[i]=true}}}if(this.config.muteCommitsNotAncestorsOfHead&&e!==null&&typeof this.commitLookup[e]==="number"){var s=[];for(var i=0;i<this.commits.length;i++){s[i]=false}var n=function(e){if(e.id===xe||s[e.id])return;s[e.id]=true;var t=e.getParents();for(var i=0;i<t.length;i++)n(t[i])};n(this.vertices[this.commitLookup[e]]);for(var i=0;i<this.commits.length;i++){if(!s[i]&&(this.commits[i].stash===null||typeof this.commitLookup[this.commits[i].stash.baseHash]!=="number"||!s[this.commitLookup[this.commits[i].stash.baseHash]])){t[i]=true}}}return t};e.prototype.limitMaxWidth=function(e){this.maxWidth=e;this.applyMaxWidth(this.getContentWidth())};e.prototype.setDimensions=function(e,t){this.setSvgWidth(e);this.svg.setAttribute("height",t.toString());this.maskRect.setAttribute("width",e.toString());this.maskRect.setAttribute("height",t.toString())};e.prototype.applyMaxWidth=function(e){this.setSvgWidth(e);var t=this.maxWidth>-1?(this.maxWidth-12)/e:1;var i=this.maxWidth>-1?this.maxWidth/e:1;this.gradientStop1.setAttribute("offset",t.toString());this.gradientStop2.setAttribute("offset",i.toString())};e.prototype.setSvgWidth=function(e){var t=this.maxWidth>-1?Math.min(e,this.maxWidth):e;this.svg.setAttribute("width",t.toString())};e.prototype.determinePath=function(e){var t=e;var i=this.vertices[t],s=this.vertices[t].getNextParent(),n;var o=i.isNotOnBranch()?i.getNextPoint():i.getPoint(),r;if(s!==null&&s.id!==xe&&i.isMerge()&&!i.isNotOnBranch()&&!s.isNotOnBranch()){var a=false,l=s.getBranch();for(t=e+1;t<this.vertices.length;t++){n=this.vertices[t];r=n.getPointConnectingTo(s,l);if(r!==null){a=true}else{r=n.getNextPoint()}l.addLine(o,r,i.getIsCommitted(),!a&&n!==s?o.x<r.x:true);n.registerUnavailablePoint(r.x,s,l);o=r;if(a){i.registerParentProcessed();break}}}else{var h=new Ee(this.getAvailableColour(e));i.addToBranch(h,o.x);i.registerUnavailablePoint(o.x,i,h);for(t=e+1;t<this.vertices.length;t++){n=this.vertices[t];r=s===n&&!s.isNotOnBranch()?n.getPoint():n.getNextPoint();h.addLine(o,r,i.getIsCommitted(),o.x<r.x);n.registerUnavailablePoint(r.x,s,h);o=r;if(s===n){i.registerParentProcessed();var c=!s.isNotOnBranch();s.addToBranch(h,r.x);i=s;s=i.getNextParent();if(s===null||c){break}}}if(t===this.vertices.length&&s!==null&&s.id===xe){i.registerParentProcessed()}h.setEnd(t);this.branches.push(h);this.availableColours[h.getColour()]=t}};e.prototype.getAvailableColour=function(e){for(var t=0;t<this.availableColours.length;t++){if(e>this.availableColours[t]){return t}}this.availableColours.push(0);return this.availableColours.length-1};e.prototype.vertexOver=function(e){var t=this;if(e.target===null)return;this.closeTooltip();var i=e.target;var s=parseInt(i.dataset.id);this.tooltipId=s;var n=Je(L.getElementsByClassName("commit"),s);if(n!==null)n.classList.add(Re);if(s<this.commits.length&&this.commits[s].hash!==B){this.tooltipTimeout=setTimeout(function(){t.tooltipTimeout=null;var e=i.getBoundingClientRect().top+4;if(e>=5&&e<=t.viewElem.clientHeight-5){t.tooltipVertex=i;et();t.showTooltip(s,e)}},100)}};e.prototype.vertexOut=function(e){if(e.target===null)return;this.closeTooltip()};e.prototype.showTooltip=function(e,t){if(this.tooltipVertex!==null){this.tooltipVertex.setAttribute("r",this.tooltipVertex.classList.contains("stashOuter")?"5.5":"5")}var i=this.getAllChildren(e);var s=[],n=[],o=[],r=[],a=false;for(var l=0;l<i.length;l++){var h=this.commits[i[l]];for(var c=0;c<h.heads.length;c++)s.push(h.heads[c]);for(var c=0;c<h.remotes.length;c++)n.push(h.remotes[c]);for(var c=0;c<h.tags.length;c++)r.push(h.tags[c].name);if(h.stash!==null)o.push(h.stash.selector.substring(5));if(h.hash===this.commitHead)a=true}var d=function(e){if(e.length>10)e.splice(5,e.length-10," "+k+" ");return e.join("")};var u='<div class="graphTooltipTitle">Commit '+Ze(this.commits[e].hash)+"</div>";if(this.commitHead!==null&&typeof this.commitLookup[this.commitHead]==="number"){u+='<div class="graphTooltipSection">This commit is '+(a?"":"<b><i>not</i></b> ")+'included in <span class="graphTooltipRef">HEAD</span></div>'}if(s.length>0||n.length>0){var m=$e(s,n),p=[];m.heads.forEach(function(e){var t=e.remotes.reduce(function(e,t){return e+'<span class="graphTooltipCombinedRef">'+Z(t)+"</span>"},"");p.push('<span class="graphTooltipRef">'+Z(e.name)+t+"</span>")});m.remotes.forEach(function(e){return p.push('<span class="graphTooltipRef">'+Z(e.name)+"</span>")});u+='<div class="graphTooltipSection">Branches: '+d(p)+"</div>"}if(r.length>0){var f=r.map(function(e){return'<span class="graphTooltipRef">'+Z(e)+"</span>"});u+='<div class="graphTooltipSection">Tags: '+d(f)+"</div>"}if(o.length>0){var f=o.map(function(e){return'<span class="graphTooltipRef">'+Z(e)+"</span>"});u+='<div class="graphTooltipSection">Stashes: '+d(f)+"</div>"}var g=this.vertices[e].getPoint(),v="var(--git-graph-color"+this.vertices[e].getColour()%this.config.graphColours.length+")";var C=L.createElement("div"),y=L.createElement("div"),b=L.createElement("div"),w=L.createElement("div");var R={x:g.x*this.config.grid.x+this.config.grid.offsetX,y:g.y*this.config.grid.y+this.config.grid.offsetY+(this.expandedCommitId>-1&&e>this.expandedCommitId?this.config.grid.expandY:0)};C.setAttribute("id","graphTooltip");C.style.opacity="0";y.setAttribute("id","graphTooltipPointer");y.style.backgroundColor=v;b.setAttribute("id","graphTooltipContent");b.style.borderColor=v;b.innerHTML=u;b.style.maxWidth=Math.min(this.contentElem.getBoundingClientRect().width-R.x-35,600)+"px";w.setAttribute("id","graphTooltipShadow");C.appendChild(w);C.appendChild(y);C.appendChild(b);C.style.left=R.x+"px";C.style.top=R.y+"px";this.contentElem.appendChild(C);this.tooltipElem=C;var x=b.getBoundingClientRect();var E=-x.height/2;if(t+E+x.height>this.viewElem.clientHeight-4){E=this.viewElem.clientHeight-t-4-x.height}if(t+E<4){E=-t+4}y.style.top=-E+"px";C.style.top=R.y+E+"px";w.style.width=x.width+"px";w.style.height=x.height+"px";C.style.opacity="1"};e.prototype.closeTooltip=function(){if(this.tooltipId>-1){var e=Je(L.getElementsByClassName("commit"),this.tooltipId);if(e!==null)e.classList.remove(Re);this.tooltipId=-1}if(this.tooltipElem!==null){this.tooltipElem.remove();this.tooltipElem=null}if(this.tooltipTimeout!==null){clearTimeout(this.tooltipTimeout);this.tooltipTimeout=null}if(this.tooltipVertex!==null){this.tooltipVertex.setAttribute("r",this.tooltipVertex.classList.contains("stashOuter")?"4.5":"4");this.tooltipVertex=null}};return e}();var Se=function(){function e(e){var t=this;this.visible=false;this.loading=false;this.repo=null;this.hideRemotes=null;this.issueLinkingConfig=null;this.showTags=null;this.settings=null;this.view=e;this.widgetElem=L.createElement("div");this.widgetElem.className="settingsWidget";this.widgetElem.innerHTML='<h2>Repository Settings</h2><div id="settingsContent"></div><div id="settingsLoading"></div><div id="settingsClose"></div>';L.body.appendChild(this.widgetElem);this.contentsElem=L.getElementById("settingsContent");this.loadingElem=L.getElementById("settingsLoading");var i=L.getElementById("settingsClose");i.innerHTML=S.close;i.addEventListener("click",function(){return t.close()})}e.prototype.show=function(e,t,i,s,n){if(this.visible)return;this.visible=true;this.loading=true;this.repo=e;this.hideRemotes=t;this.issueLinkingConfig=i;this.showTags=s;se(this.widgetElem,U,n);this.widgetElem.classList.add(f);this.requestSettings();this.view.saveState()};e.prototype.refresh=function(){if(!this.visible)return;this.loading=true;this.requestSettings()};e.prototype.close=function(){if(!this.visible)return;this.visible=false;this.loading=false;this.repo=null;this.hideRemotes=null;this.issueLinkingConfig=null;this.showTags=null;this.settings=null;this.widgetElem.classList.add(U);this.widgetElem.classList.remove(f);this.widgetElem.classList.remove(E);this.contentsElem.innerHTML="";this.loadingElem.innerHTML="";this.view.saveState()};e.prototype.getState=function(){return{visible:this.visible,repo:this.repo,settings:this.settings}};e.prototype.restoreState=function(e,t,i,s){if(!e.visible||e.repo===null)return;this.settings=e.settings;this.show(e.repo,t,i,s,false)};e.prototype.isVisible=function(){return this.visible};e.prototype.loadSettings=function(e,t){var i=this;if(!this.visible)return;this.settings=e;if(this.settings!==null&&this.hideRemotes!==null){var s=this.settings.remotes.map(function(e){return e.name});this.hideRemotes=this.hideRemotes.filter(function(e){return s.includes(e)})}if(t===null){this.loading=false;this.render();this.view.saveState()}else{var n="Unable To Load Repository Settings";this.contentsElem.innerHTML="";this.loadingElem.innerHTML="<span>"+n+"</span>";se(this.widgetElem,E,true);He.showError(n,t,"Retry",function(){return i.requestSettings()})}};e.prototype.render=function(){var r=this;var e,t,i,s;if(this.settings!==null){var o='<div class="settingsSection centered"><h3>General</h3>';o+='<label id="settingsShowTags"><input type="checkbox" id="settingsShowTagsCheckbox" tabindex="-1"><span class="customCheckbox"></span>Show Tags</label></div>';o+='<div class="settingsSection centered"><h3>User Details</h3>';var n=this.settings.user.name,a=this.settings.user.email;var l=n.local!==null||n.global!==null;var h=a.local!==null||a.global!==null;if(l||h){var c=Z((t=(e=n.local,e!==null&&e!==void 0?e:n.global),t!==null&&t!==void 0?t:"Not Set"));var d=Z((s=(i=a.local,i!==null&&i!==void 0?i:a.global),s!==null&&s!==void 0?s:"Not Set"));o+="<table>";o+='<tr><td class="left">User Name:</td><td class="leftWithEllipsis" title="'+c+(l?" ("+(n.local!==null?"Local":"Global")+")":"")+'">'+c+"</td></tr>";o+='<tr><td class="left">User Email:</td><td class="leftWithEllipsis" title="'+d+(h?" ("+(a.local!==null?"Local":"Global")+")":"")+'">'+d+"</td></tr>";o+="</table>";o+='<div class="settingsSectionButtons"><div id="editUserDetails" class="editBtn">'+S.pencil+'Edit</div><div id="removeUserDetails" class="removeBtn">'+S.close+"Remove</div></div>"}else{o+="<span>User Details (such as name and email) are used by Git to record the Author and Committer of commit objects.</span>";o+='<div class="settingsSectionButtons"><div id="editUserDetails" class="addBtn">'+S.close+"Add User Details</div></div>"}o+="</div>";o+='<div class="settingsSection"><h3>Remote Configuration</h3><table><tr><th>Remote</th><th>URL</th><th>Type</th><th>Action</th></tr>';if(this.settings.remotes.length>0){this.settings.remotes.forEach(function(e,t){var i=r.hideRemotes!==null&&r.hideRemotes.includes(e.name);var s=Z(e.url||"Not Set"),n=Z(e.pushUrl||e.url||"Not Set");o+='<tr class="lineAbove">'+'<td class="left" rowspan="2"><span class="hideRemoteBtn" data-index="'+t+'" title="Click to '+(i?"show":"hide")+' branches of this remote.">'+(i?S.eyeClosed:S.eyeOpen)+"</span>"+Z(e.name)+"</td>"+'<td class="leftWithEllipsis" title="Fetch URL: '+s+'">'+s+"</td><td>Fetch</td>"+'<td class="remoteBtns" rowspan="2" data-index="'+t+'"><div class="fetchRemote" title="Fetch from Remote">'+S.download+'</div> <div class="pruneRemote" title="Prune Remote'+k+'">'+S.branch+'</div><br><div class="editRemote" title="Edit Remote'+k+'">'+S.pencil+'</div> <div class="deleteRemote" title="Delete Remote'+k+'">'+S.close+"</div></td>"+'</tr><tr><td class="leftWithEllipsis" title="Push URL: '+n+'">'+n+"</td><td>Push</td></tr>"})}else{o+='<tr class="lineAbove"><td colspan="4">There are no remotes configured for this repository.</td></tr>'}o+='</table><div class="settingsSectionButtons lineAbove"><div id="settingsAddRemote" class="addBtn">'+S.close+"Add Remote</div></div></div>";o+='<div class="settingsSection centered"><h3>Issue Linking</h3>';var u=this.issueLinkingConfig!==null?this.issueLinkingConfig:globalState.issueLinkingConfig;if(u!==null){var m=Z(u.issue),p=Z(u.url);o+='<table><tr><td class="left">Issue Regex:</td><td class="leftWithEllipsis" title="'+m+'">'+m+'</td></tr><tr><td class="left">Issue URL:</td><td class="leftWithEllipsis" title="'+p+'">'+p+"</td></tr></table>";o+='<div class="settingsSectionButtons"><div id="editIssueLinking" class="editBtn">'+S.pencil+'Edit</div><div id="removeIssueLinking" class="removeBtn">'+S.close+"Remove</div></div>"}else{o+="<span>Issue Linking converts issue numbers in commit messages into hyperlinks, that open the issue in your issue tracking system.</span>";o+='<div class="settingsSectionButtons"><div id="editIssueLinking" class="addBtn">'+S.close+"Add Issue Linking</div></div>"}o+="</div>";o+='<div class="settingsSection"><h3>Extension Settings</h3>';o+='<div class="settingsSectionButtons"><div id="openExtensionSettings">'+S.gear+"Open Git Graph Extension Settings</div></div></div>";this.contentsElem.innerHTML=o;var f=L.getElementById("settingsShowTagsCheckbox");f.checked=this.showTags===0?initialState.config.showTags:this.showTags===1;f.addEventListener("change",function(){if(r.repo===null)return;var e=L.getElementById("settingsShowTagsCheckbox").checked;r.showTags=e?1:2;r.view.saveShowTagsConfig(r.repo,r.showTags);r.view.refresh(true)});L.getElementById("editUserDetails").addEventListener("click",function(){var e,t,i,s;if(r.settings===null)return;var n=r.settings.user.name,o=r.settings.user.email;He.showForm("Set the user name and email used by Git to record the Author and Committer of commit objects:",[{type:0,name:"User Name",default:(t=(e=n.local,e!==null&&e!==void 0?e:n.global),t!==null&&t!==void 0?t:""),placeholder:null},{type:0,name:"User Email",default:(s=(i=o.local,i!==null&&i!==void 0?i:o.global),s!==null&&s!==void 0?s:""),placeholder:null},{type:4,name:"Use Globally",value:n.local===null&&o.local===null,info:'Use the "User Name" and "User Email" globally for all Git repositories (it can be overridden per repository).'}],"Set User Details",function(e){var t=e[2];Ke({command:"editUserDetails",repo:r.repo,name:e[0],email:e[1],location:t?"global":"local",deleteLocalName:t&&n.local!==null,deleteLocalEmail:t&&o.local!==null},"Setting User Details")},null)});if(l||h){L.getElementById("removeUserDetails").addEventListener("click",function(){if(r.settings===null)return;var e=r.settings.user.name,t=r.settings.user.email;var i=e.local===null&&t.local===null;He.showConfirmation("Are you sure you want to remove the <b>"+(i?"globally":"locally")+" configured</b> user name and email, which are used by Git to record the Author and Committer of commit objects?",function(){Ke({command:"deleteUserDetails",repo:r.repo,name:(i?e.global:e.local)!==null,email:(i?t.global:t.local)!==null,location:i?"global":"local"},"Removing User Details")},null)})}var g="Leave blank to use the Fetch URL";L.getElementById("settingsAddRemote").addEventListener("click",function(){He.showForm("Add a new remote to this repository:",[{type:0,name:"Name",default:"",placeholder:null},{type:0,name:"Fetch URL",default:"",placeholder:null},{type:0,name:"Push URL",default:"",placeholder:g},{type:4,name:"Fetch Immediately",value:true}],"Add Remote",function(e){Ke({command:"addRemote",name:e[0],repo:r.repo,url:e[1],pushUrl:e[2]!==""?e[2]:null,fetch:e[3]},"Adding Remote")},{type:"repo"})});ee("editRemote","click",function(e){var t=r.getRemoteForBtnEvent(e);He.showForm("Edit the remote <b><i>"+Z(t.name)+"</i></b>:",[{type:0,name:"Name",default:t.name,placeholder:null},{type:0,name:"Fetch URL",default:t.url!==null?t.url:"",placeholder:null},{type:0,name:"Push URL",default:t.pushUrl!==null?t.pushUrl:"",placeholder:g}],"Save Changes",function(e){Ke({command:"editRemote",repo:r.repo,nameOld:t.name,nameNew:e[0],urlOld:t.url,urlNew:e[1]!==""?e[1]:null,pushUrlOld:t.pushUrl,pushUrlNew:e[2]!==""?e[2]:null},"Saving Changes to Remote")},{type:"repo"})});ee("deleteRemote","click",function(e){var t=r.getRemoteForBtnEvent(e);He.showConfirmation("Are you sure you want to delete the remote <b><i>"+Z(t.name)+"</i></b>?",function(){Ke({command:"deleteRemote",repo:r.repo,name:t.name},"Deleting Remote")},{type:"repo"})});ee("fetchRemote","click",function(e){Ke({command:"fetch",repo:r.repo,name:r.getRemoteForBtnEvent(e).name,prune:false},"Fetching from Remote")});ee("pruneRemote","click",function(e){var t=r.getRemoteForBtnEvent(e);He.showConfirmation("Are you sure you want to prune remote-tracking references that no longer exist on the remote <b><i>"+Z(t.name)+"</i></b>?",function(){Ke({command:"pruneRemote",repo:r.repo,name:t.name},"Pruning Remote")},{type:"repo"})});ee("hideRemoteBtn","click",function(e){if(r.repo===null||r.hideRemotes===null)return;var t=e.target.closest(".hideRemoteBtn");var i=r.settings.remotes[parseInt(t.dataset.index)].name;var s=!r.hideRemotes.includes(i);t.title="Click to "+(s?"show":"hide")+" branches of this remote.";t.innerHTML=s?S.eyeClosed:S.eyeOpen;if(s){r.hideRemotes.push(i)}else{r.hideRemotes.splice(r.hideRemotes.indexOf(i),1)}r.view.saveHiddenRemotes(r.repo,r.hideRemotes);r.view.refresh(true)});L.getElementById("editIssueLinking").addEventListener("click",function(){var e=r.issueLinkingConfig!==null?r.issueLinkingConfig:globalState.issueLinkingConfig;if(e!==null){r.showIssueLinkingDialog(e.issue,e.url,r.issueLinkingConfig===null&&globalState.issueLinkingConfig!==null,true)}else{r.showIssueLinkingDialog(null,null,false,false)}});if(this.issueLinkingConfig!==null||globalState.issueLinkingConfig!==null){L.getElementById("removeIssueLinking").addEventListener("click",function(){He.showConfirmation("Are you sure you want to remove "+(r.issueLinkingConfig!==null?(globalState.issueLinkingConfig!==null?"the <b>locally configured</b> ":"")+"Issue Linking from this repository":"the <b>globally configured</b> Issue Linking in Git Graph")+"?",function(){r.setIssueLinkingConfig(null,r.issueLinkingConfig===null)},null)})}L.getElementById("openExtensionSettings").addEventListener("click",function(){ae({command:"openExtensionSettings"})})}se(this.widgetElem,E,this.loading);this.loadingElem.innerHTML=this.loading?"<span>"+S.loading+"Loading ...</span>":""};e.prototype.requestSettings=function(){if(this.repo===null)return;ae({command:"getSettings",repo:this.repo});this.render()};e.prototype.setIssueLinkingConfig=function(e,t){if(this.repo===null)return;if(t){if(this.issueLinkingConfig!==null){this.issueLinkingConfig=null;this.view.saveIssueLinkingConfig(this.repo,null)}this.view.updateGlobalViewState("issueLinkingConfig",e)}else{this.issueLinkingConfig=e;this.view.saveIssueLinkingConfig(this.repo,this.issueLinkingConfig)}this.view.refresh(true);this.render()};e.prototype.showIssueLinkingDialog=function(e,t,i,o){var r=this;var s="<b>"+(o?"Edit Issue Linking for":"Add Issue Linking to")+" this Repository</b>";s+='<p style="font-size:12px; margin:6px 0;">The following example links <b>#123</b> in commit messages to <b>https://github.com/mhutchie/repo/issues/123</b>:</p>';s+='<table style="display:inline-table; width:360px; text-align:left; font-size:12px; margin-bottom:2px;"><tr><td>Issue Regex:</td><td>#(\\d+)</td></tr><tr><td>Issue URL:</td><td>https://github.com/mhutchie/repo/issues/$1</td></tr></tbody></table>';if(!o&&e===null&&t===null){e=Be(this.view.getCommits());if(e!==null){s+='<p style="font-size:12px"><i>The prefilled Issue Regex was detected in commit messages in this repository. Review and/or correct it if necessary.</i></p>'}}He.showForm(s,[{type:0,name:"Issue Regex",default:e!==null?e:"",placeholder:null,info:'A regular expression that matches your issue numbers, with a single capturing group ( ) that will be substituted into the "Issue URL".'},{type:0,name:"Issue URL",default:t!==null?t:"",placeholder:null,info:'The issue\'s URL in your project’s issue tracking system, with $1 as a placeholder for the group captured ( ) in the "Issue Regex".'},{type:4,name:"Use Globally",value:i,info:'Use the "Issue Regex" and "Issue URL" for all repositories by default (it can be overridden per repository). Note: "Use Globally" is only suitable if identical Issue Linking applies to the majority of your repositories (e.g. when using JIRA or Pivotal Tracker).'}],"Save",function(e){var t=e[0].trim(),i=e[1].trim(),s=e[2];var n=null;try{if(t.indexOf("(")===-1||t.indexOf(")")===-1){n="The regular expression does not contain a capturing group ( )."}else if(new RegExp(t,"gu")){n=null}}catch(e){n=e.message}if(n!==null){He.showError("Invalid Issue Regex",n,"Go Back",function(){r.showIssueLinkingDialog(t,i,s,o)})}else if(i.indexOf("$1")===-1){He.showError("Invalid Issue URL","The Issue URL does not contain the placeholder $1 for the issue number captured in the Issue Regex.","Go Back",function(){r.showIssueLinkingDialog(t,i,s,o)})}else{r.setIssueLinkingConfig({issue:t,url:i},s)}},null,false)};e.prototype.getRemoteForBtnEvent=function(e){return this.settings.remotes[parseInt(e.target.closest(".remoteBtns").dataset.index)]};return e}();function Be(i){var e=["#(\\d+)","^(\\d+)\\.(?=\\s|$)","^(\\d+):(?=\\s|$)","([A-Za-z]+-\\d+)"].map(function(e){var t=new RegExp(e);return{pattern:e,matches:i.filter(function(e){return t.test(e.message)}).length}}).sort(function(e,t){return t.matches-e.matches});if(e[0].matches>.1*i.length){return e[0].pattern}return null}var Te=function(){function e(e,t){var i=this;this.gitBranches=[];this.gitBranchHead=null;this.gitRemotes=[];this.commits=[];this.commitHead=null;this.commitLookup={};this.avatars={};this.currentBranches=null;this.currentRepoLoading=true;this.moreCommitsAvailable=false;this.expandedCommit=null;this.scrollTop=0;this.renderedGitBranchHead=null;this.gitRepos=initialState.repos;this.config=initialState.config;this.maxCommits=this.config.initialLoadCommits;this.graph=new Le("commitGraph",e,this.config);this.viewElem=e;this.currentRepoRefreshState={inProgress:false,hard:true,loadRepoInfoRefreshId:initialState.loadRepoInfoRefreshId,loadCommitsRefreshId:initialState.loadCommitsRefreshId,repoInfoChanges:false,requestingRepoInfo:false};this.controlsElem=L.getElementById("controls");this.tableElem=L.getElementById("commitTable");this.footerElem=L.getElementById("footer");this.scrollShadowElem=L.getElementById("scrollShadow");this.repoDropdown=new ve("repoDropdown",true,false,"Repos",function(e){i.loadRepo(e[0])});this.branchDropdown=new ve("branchDropdown",false,true,"Branches",function(e){i.currentBranches=e;i.maxCommits=i.config.initialLoadCommits;i.saveState();i.clearCommits();i.requestLoadRepoInfoAndCommits(true,true)});this.showRemoteBranchesElem=L.getElementById("showRemoteBranchesCheckbox");this.showRemoteBranchesElem.addEventListener("change",function(){i.gitRepos[i.currentRepo].showRemoteBranches=i.showRemoteBranchesElem.checked;i.saveRepoState();i.refresh(true)});this.refreshBtnElem=L.getElementById("refreshBtn");this.refreshBtnElem.addEventListener("click",function(){if(!i.refreshBtnElem.classList.contains(H)){i.refresh(true)}});this.renderRefreshButton();this.findWidget=new be(this);this.settingsWidget=new Se(this);se(L.body,w,this.config.branchLabelsAlignedToGraph);se(L.body,V,this.config.tagLabelsOnRight);this.observeWindowSizeChanges();this.observeWebviewStyleChanges();this.observeViewScroll();this.observeKeyboardEvents();this.observeInternalUrls();this.observeTableEvents();if(t&&!t.currentRepoLoading&&typeof this.gitRepos[t.currentRepo]!=="undefined"){this.currentRepo=t.currentRepo;this.currentBranches=t.currentBranches;this.maxCommits=t.maxCommits;this.expandedCommit=t.expandedCommit;this.avatars=t.avatars;this.loadRepoInfo(t.gitBranches,t.gitBranchHead,t.gitRemotes,true);this.loadCommits(t.commits,t.commitHead,t.moreCommitsAvailable);this.findWidget.restoreState(t.findWidget);if(this.currentRepo===t.settingsWidget.repo){this.settingsWidget.restoreState(t.settingsWidget,this.gitRepos[this.currentRepo].hideRemotes,this.gitRepos[this.currentRepo].issueLinkingConfig,this.gitRepos[this.currentRepo].showTags)}this.showRemoteBranchesElem.checked=this.gitRepos[t.currentRepo].showRemoteBranches}var s=initialState.loadRepo;if(s===null&&t&&t.currentRepoLoading&&typeof t.currentRepo!=="undefined"){s=t.currentRepo}if(!this.loadRepos(this.gitRepos,initialState.lastActiveRepo,s)){if(t){this.scrollTop=t.scrollTop;this.viewElem.scroll(0,this.scrollTop)}this.requestLoadRepoInfoAndCommits(false,false)}var n=L.getElementById("fetchBtn"),o=L.getElementById("findBtn"),r=L.getElementById("settingsBtn");n.title="Fetch"+(this.config.fetchAndPrune?" & Prune":"")+" from Remote(s)";n.innerHTML=S.download;n.addEventListener("click",function(){Ke({command:"fetch",repo:i.currentRepo,name:null,prune:i.config.fetchAndPrune},"Fetching from Remote(s)")});o.innerHTML=S.search;o.addEventListener("click",function(){return i.findWidget.show(true)});r.innerHTML=S.gear;r.addEventListener("click",function(){i.settingsWidget.show(i.currentRepo,i.gitRepos[i.currentRepo].hideRemotes,i.gitRepos[i.currentRepo].issueLinkingConfig,i.gitRepos[i.currentRepo].showTags,true)})}e.prototype.loadRepos=function(e,t,i){this.gitRepos=e;this.saveState();var s=Object.keys(e),n;if(i!==null&&this.currentRepo!==i&&typeof e[i]!=="undefined"){n=i}else if(typeof e[this.currentRepo]==="undefined"){n=t!==null&&typeof e[t]!=="undefined"?t:s[0]}else{n=this.currentRepo}se(this.controlsElem,"singleRepo",s.length===1);this.repoDropdown.setOptions(Xe(s),[n]);if(this.currentRepo!==n){this.loadRepo(n);return true}else{return false}};e.prototype.loadRepo=function(e){this.currentRepo=e;this.currentRepoLoading=true;this.showRemoteBranchesElem.checked=this.gitRepos[this.currentRepo].showRemoteBranches;this.maxCommits=this.config.initialLoadCommits;this.gitRemotes=[];this.renderFetchButton();this.closeCommitDetails(false);this.settingsWidget.close();this.currentBranches=null;this.saveState();this.refresh(true)};e.prototype.loadRepoInfo=function(e,t,i,s){if(!s||!this.currentRepoRefreshState.hard&&Y(this.gitBranches,e)&&this.gitBranchHead===t&&Y(this.gitRemotes,i)){this.finaliseLoadRepoInfo(false,s);return}this.gitBranches=e;this.gitBranchHead=t;this.gitRemotes=i;this.renderFetchButton();if(this.currentBranches!==null&&!(this.currentBranches.length===1&&this.currentBranches[0]===p)){var n=0,o=this.config.customBranchGlobPatterns.map(function(e){return e.glob});while(n<this.currentBranches.length){if(!e.includes(this.currentBranches[n])&&!o.includes(this.currentBranches[n])){this.currentBranches.splice(n,1)}else{n++}}if(this.currentBranches.length===0)this.currentBranches=null}if(this.currentBranches===null){this.currentBranches=[this.config.showCurrentBranchByDefault&&this.gitBranchHead!==null?this.gitBranchHead:p]}this.saveState();var r=[{name:"Show All",value:p}];for(var n=0;n<this.config.customBranchGlobPatterns.length;n++){r.push({name:"Glob: "+this.config.customBranchGlobPatterns[n].name,value:this.config.customBranchGlobPatterns[n].glob})}for(var n=0;n<this.gitBranches.length;n++){r.push({name:this.gitBranches[n].indexOf("remotes/")===0?this.gitBranches[n].substring(8):this.gitBranches[n],value:this.gitBranches[n]})}this.branchDropdown.setOptions(r,this.currentBranches);var a=this.gitRepos[this.currentRepo].hideRemotes;var l=a.filter(function(e){return i.includes(e)});if(a.length!==l.length){this.saveHiddenRemotes(this.currentRepo,l)}this.finaliseLoadRepoInfo(true,s)};e.prototype.finaliseLoadRepoInfo=function(e,t){var i=this.currentRepoRefreshState;if(i.inProgress){if(t){i.repoInfoChanges=i.repoInfoChanges||e;i.requestingRepoInfo=false;this.requestLoadCommits()}else{He.closeActionRunning();i.inProgress=false;this.renderRefreshButton();ae({command:"loadRepos",check:true})}}};e.prototype.loadCommits=function(e,t,i){if(!this.currentRepoLoading&&!this.currentRepoRefreshState.hard&&this.moreCommitsAvailable===i&&this.commitHead===t&&e.length>0&&G(this.commits,e,function(e,t){return e.hash===t.hash&&Y(e.heads,t.heads)&&G(e.tags,t.tags,function(e,t){return e.name===t.name&&e.annotated===t.annotated})&&G(e.remotes,t.remotes,function(e,t){return e.name===t.name&&e.remote===t.remote})&&Y(e.parents,t.parents)&&(e.stash===null&&t.stash===null||e.stash!==null&&t.stash!==null&&e.stash.selector===t.stash.selector)})&&this.renderedGitBranchHead===this.gitBranchHead){if(this.commits[0].hash===B){this.commits[0]=e[0];this.saveState();this.renderUncommittedChanges();if(this.expandedCommit!==null&&this.expandedCommit.srcElem!==null){if(this.expandedCommit.compareWithHash===null){if(this.expandedCommit.hash===B){this.requestCommitDetails(this.expandedCommit.hash,true)}}else{if(this.expandedCommit.compareWithSrcElem!==null&&(this.expandedCommit.hash===B||this.expandedCommit.compareWithHash===B)){this.requestCommitComparison(this.expandedCommit.hash,this.expandedCommit.compareWithHash,true)}}}}this.finaliseLoadCommits();return}var s=this.currentRepoLoading;this.currentRepoLoading=false;this.moreCommitsAvailable=i;this.commits=e;this.commitHead=t;this.commitLookup={};var n,o=false,r=false,a={},l;for(n=0;n<this.commits.length;n++){l=this.commits[n];this.commitLookup[l.hash]=n;if(this.expandedCommit!==null){if(this.expandedCommit.hash===l.hash){o=true}else if(this.expandedCommit.compareWithHash===l.hash){r=true}}if(this.config.fetchAvatars&&typeof this.avatars[l.email]!=="string"&&l.email!==""){if(typeof a[l.email]==="undefined"){a[l.email]=[l.hash]}else{a[l.email].push(l.hash)}}}if(this.expandedCommit!==null&&(!o||this.expandedCommit.compareWithHash!==null&&!r)){this.closeCommitDetails(false)}this.saveState();this.graph.loadCommits(this.commits,this.commitHead,this.commitLookup);this.render();if(s&&this.config.openRepoToHead&&this.commitHead!==null){this.scrollToCommit(this.commitHead,true)}this.finaliseLoadCommits();this.requestAvatars(a)};e.prototype.finaliseLoadCommits=function(){var e=this.currentRepoRefreshState;if(e.inProgress){He.closeActionRunning();if(He.isTargetDynamicSource()){if(e.repoInfoChanges){He.close()}else{He.refresh(this.getCommits())}}if(Ie.isTargetDynamicSource()){if(e.repoInfoChanges){Ie.close()}else{Ie.refresh(this.getCommits())}}e.inProgress=false;this.renderRefreshButton()}};e.prototype.clearCommits=function(){et();this.moreCommitsAvailable=false;this.commits=[];this.commitHead=null;this.commitLookup={};this.renderedGitBranchHead=null;this.closeCommitDetails(false);this.saveState();this.graph.loadCommits(this.commits,this.commitHead,this.commitLookup);this.tableElem.innerHTML="";this.footerElem.innerHTML="";this.renderGraph();this.findWidget.refresh()};e.prototype.processLoadRepoInfoResponse=function(e){if(e.error===null){var t=this.currentRepoRefreshState;if(t.inProgress&&t.loadRepoInfoRefreshId===e.refreshId){this.loadRepoInfo(e.branches,e.head,e.remotes,e.isRepo)}}else{this.displayLoadDataError("Unable to load Repository Info",e.error)}};e.prototype.processLoadCommitsResponse=function(e){if(e.error===null){var t=this.currentRepoRefreshState;if(t.inProgress&&t.loadCommitsRefreshId===e.refreshId){this.loadCommits(e.commits,e.head,e.moreCommitsAvailable)}}else{var i=this.gitBranches.length===0&&e.error.indexOf("bad revision 'HEAD'")>-1?"There are no commits in this repository.":e.error;this.displayLoadDataError("Unable to load Commits",i)}};e.prototype.displayLoadDataError=function(e,t){var i=this;this.clearCommits();this.currentRepoRefreshState.inProgress=false;this.renderRefreshButton();He.showError(e,t,"Retry",function(){i.refresh(true)})};e.prototype.loadAvatar=function(e,t){this.avatars[e]=t;this.saveState();var i=L.getElementsByClassName("avatar"),s=Z(e);for(var n=0;n<i.length;n++){if(i[n].dataset.email===s){i[n].innerHTML='<img class="avatarImg" src="'+t+'">'}}};e.prototype.getCommits=function(){return this.commits};e.prototype.getSettingsWidget=function(){return this.settingsWidget};e.prototype.refresh=function(e){if(e){this.clearCommits()}this.requestLoadRepoInfoAndCommits(e,false)};e.prototype.requestLoadRepoInfo=function(){ae({command:"loadRepoInfo",repo:this.currentRepo,refreshId:++this.currentRepoRefreshState.loadRepoInfoRefreshId,showRemoteBranches:this.gitRepos[this.currentRepo].showRemoteBranches,hideRemotes:this.gitRepos[this.currentRepo].hideRemotes})};e.prototype.requestLoadCommits=function(){ae({command:"loadCommits",repo:this.currentRepo,refreshId:++this.currentRepoRefreshState.loadCommitsRefreshId,branches:this.currentBranches===null||this.currentBranches.length===1&&this.currentBranches[0]===p?null:this.currentBranches,maxCommits:this.maxCommits,showRemoteBranches:this.gitRepos[this.currentRepo].showRemoteBranches,showTags:this.gitRepos[this.currentRepo].showTags===0?this.config.showTags:this.gitRepos[this.currentRepo].showTags===1,remotes:this.gitRemotes,hideRemotes:this.gitRepos[this.currentRepo].hideRemotes})};e.prototype.requestLoadRepoInfoAndCommits=function(e,t){var i=this.currentRepoRefreshState;if(i.inProgress){i.hard=i.hard||e;if(!t){i.loadCommitsRefreshId++}}else{i.hard=e;i.inProgress=true;i.repoInfoChanges=false;i.requestingRepoInfo=false}this.renderRefreshButton();if(this.commits.length===0){this.tableElem.innerHTML='<h2 id="loadingHeader">'+S.loading+"Loading ...</h2>"}if(t){if(!i.requestingRepoInfo){this.requestLoadCommits()}}else{i.requestingRepoInfo=true;this.requestLoadRepoInfo()}};e.prototype.requestCommitDetails=function(e,t){var i=this.commits[this.commitLookup[e]];ae({command:"commitDetails",repo:this.currentRepo,commitHash:e,stash:i.stash,avatarEmail:this.config.fetchAvatars&&e!==B?i.email:null,refresh:t})};e.prototype.requestCommitComparison=function(e,t,i){var s=this.getCommitOrder(e,t);ae({command:"compareCommits",repo:this.currentRepo,commitHash:e,compareWithHash:t,fromHash:s.from,toHash:s.to,refresh:i})};e.prototype.requestAvatars=function(e){var t=Object.keys(e),i=this.gitRemotes.length>0?this.gitRemotes.includes("origin")?"origin":this.gitRemotes[0]:null;for(var s=0;s<t.length;s++){ae({command:"fetchAvatar",repo:this.currentRepo,remote:i,email:t[s],commits:e[t[s]]})}};e.prototype.saveState=function(){t.setState({currentRepo:this.currentRepo,currentRepoLoading:this.currentRepoLoading,gitRepos:this.gitRepos,gitBranches:this.gitBranches,gitBranchHead:this.gitBranchHead,gitRemotes:this.gitRemotes,commits:this.commits,commitHead:this.commitHead,avatars:this.avatars,currentBranches:this.currentBranches,moreCommitsAvailable:this.moreCommitsAvailable,maxCommits:this.maxCommits,expandedCommit:this.expandedCommit,scrollTop:this.scrollTop,findWidget:this.findWidget.getState(),settingsWidget:this.settingsWidget.getState()})};e.prototype.saveRepoState=function(){ae({command:"setRepoState",repo:this.currentRepo,state:this.gitRepos[this.currentRepo]})};e.prototype.saveColumnWidths=function(e){this.gitRepos[this.currentRepo].columnWidths=[e[0],e[2],e[3],e[4]];this.saveRepoState()};e.prototype.saveHiddenRemotes=function(e,t){if(e===this.currentRepo){this.gitRepos[this.currentRepo].hideRemotes=t;this.saveRepoState()}};e.prototype.saveIssueLinkingConfig=function(e,t){if(e===this.currentRepo){this.gitRepos[this.currentRepo].issueLinkingConfig=t;this.saveRepoState()}};e.prototype.saveShowTagsConfig=function(e,t){if(e===this.currentRepo){this.gitRepos[this.currentRepo].showTags=t;this.saveRepoState()}};e.prototype.updateGlobalViewState=function(e,t){globalState[e]=t;ae({command:"setGlobalViewState",state:globalState})};e.prototype.render=function(){this.renderTable();this.renderGraph()};e.prototype.renderGraph=function(){if(typeof this.currentRepo==="undefined"){return}var e=L.getElementById("tableColHeaders");var t=this.gitRepos[this.currentRepo].cdvHeight;var i=e!==null?e.clientHeight+1:0;var s=this.isCdvDocked()?null:this.expandedCommit;var n=s!==null?L.getElementById("cdv"):null;this.config.grid.expandY=n!==null?n.getBoundingClientRect().height:t;this.config.grid.y=this.commits.length>0&&this.tableElem.children.length>0?(this.tableElem.children[0].clientHeight-i-(s!==null?t:0))/this.commits.length:this.config.grid.y;this.config.grid.offsetY=i+this.config.grid.y/2;this.graph.render(s)};e.prototype.renderTable=function(){var e=this;var t=this.getColumnVisibility();var i=this.commits.length>0&&this.commits[0].hash===B?B:this.commitHead;var s=this.graph.getVertexColours();var n=this.config.branchLabelsAlignedToGraph?this.graph.getWidthsAtVertices():[];var o=this.graph.getMutedCommits(i);var r=new K(this.gitRepos[this.currentRepo].issueLinkingConfig,false,false);var a='<tr id="tableColHeaders"><th id="tableHeaderGraphCol" class="tableColHeader" data-col="0">Graph</th><th class="tableColHeader" data-col="1">Description</th>'+(t.date?'<th class="tableColHeader dateCol" data-col="2">Date</th>':"")+(t.author?'<th class="tableColHeader authorCol" data-col="3">Author</th>':"")+(t.commit?'<th class="tableColHeader" data-col="4">Commit</th>':"")+"</tr>";for(var l=0;l<this.commits.length;l++){var h=this.commits[l];var c='<span class="text">'+r.format(h.message)+"</span>";var d=J(h.date);var u=$e(h.heads,h.remotes);var m="",p="",f=void 0,g=void 0,v=void 0,C=void 0,y=void 0,b=void 0;for(f=0;f<u.heads.length;f++){v=Z(u.heads[f].name);y=u.heads[f].name===this.gitBranchHead;b='<span class="gitRef head'+(y?" active":"")+'" data-name="'+v+'">'+S.branch+'<span class="gitRefName" data-fullref="'+v+'">'+v+"</span>";for(g=0;g<u.heads[f].remotes.length;g++){C=Z(u.heads[f].remotes[g]);b+='<span class="gitRefHeadRemote" data-remote="'+C+'" data-fullref="'+Z(u.heads[f].remotes[g]+"/"+u.heads[f].name)+'">'+C+"</span>"}b+="</span>";m=y?b+m:m+b}for(f=0;f<u.remotes.length;f++){v=Z(u.remotes[f].name);m+='<span class="gitRef remote" data-name="'+v+'" data-remote="'+(u.remotes[f].remote!==null?Z(u.remotes[f].remote):"")+'">'+S.branch+'<span class="gitRefName" data-fullref="'+v+'">'+v+"</span></span>"}for(f=0;f<h.tags.length;f++){v=Z(h.tags[f].name);p+='<span class="gitRef tag" data-name="'+v+'" data-tagtype="'+(h.tags[f].annotated?"annotated":"lightweight")+'">'+S.tag+'<span class="gitRefName" data-fullref="'+v+'">'+v+"</span></span>"}if(h.stash!==null){v=Z(h.stash.selector);m='<span class="gitRef stash" data-name="'+v+'">'+S.stash+'<span class="gitRefName" data-fullref="'+v+'">'+Z(h.stash.selector.substring(5))+"</span></span>"+m}var w=h.hash===this.commitHead?'<span class="commitHeadDot"></span>':"";a+='<tr class="commit'+(h.hash===i?" current":"")+(o[l]?" mute":"")+'"'+(h.hash!==B?"":' id="uncommittedChanges"')+' data-id="'+l+'" data-color="'+s[l]+'">'+(this.config.branchLabelsAlignedToGraph?"<td>"+(m!==""?'<span style="margin-left:'+(n[l]-4)+'px"'+m.substring(5):"")+'</td><td><span class="description">'+w:'<td></td><td><span class="description">'+w+m)+(this.config.tagLabelsOnRight?c+p:p+c)+"</span></td>"+(t.date?'<td class="dateCol text" title="'+d.title+'">'+d.formatted+"</td>":"")+(t.author?'<td class="authorCol text" title="'+Z(h.author+" <"+h.email+">")+'">'+(this.config.fetchAvatars?'<span class="avatar" data-email="'+Z(h.email)+'">'+(typeof this.avatars[h.email]==="string"?'<img class="avatarImg" src="'+this.avatars[h.email]+'">':"")+"</span>":"")+Z(h.author)+"</td>":"")+(t.commit?'<td class="text" title="'+Z(h.hash)+'">'+Ze(h.hash)+"</td>":"")+"</tr>"}this.tableElem.innerHTML="<table>"+a+"</table>";this.footerElem.innerHTML=this.moreCommitsAvailable?'<div id="loadMoreCommitsBtn" class="roundedBtn">Load More Commits</div>':"";this.makeTableResizable();this.findWidget.refresh();this.renderedGitBranchHead=this.gitBranchHead;if(this.moreCommitsAvailable){L.getElementById("loadMoreCommitsBtn").addEventListener("click",function(){e.loadMoreCommits()})}if(this.expandedCommit!==null){var R=this.expandedCommit,x=L.getElementsByClassName("commit");var E=Je(x,this.getCommitId(R.hash));var k=R.compareWithHash!==null?Je(x,this.getCommitId(R.compareWithHash)):null;if(E===null||R.compareWithHash!==null&&k===null){this.closeCommitDetails(false);this.saveState()}else{R.id=parseInt(E.dataset.id);R.srcElem=E;R.compareWithSrcElem=k;this.saveState();if(R.compareWithHash===null){if(!R.loading&&R.commitDetails!==null&&R.fileTree!==null){this.showCommitDetails(R.commitDetails,R.fileTree,R.avatar,R.codeReview,R.lastViewedFile,true);if(R.hash===B){this.requestCommitDetails(R.hash,true)}}else{this.loadCommitDetails(E)}}else{if(!R.loading&&R.fileChanges!==null&&R.fileTree!==null){this.showCommitComparison(R.hash,R.compareWithHash,R.fileChanges,R.fileTree,R.codeReview,R.lastViewedFile,true);if(R.hash===B||R.compareWithHash===B){this.requestCommitComparison(R.hash,R.compareWithHash,true)}}else{this.loadCommitComparison(k)}}}}};e.prototype.renderUncommittedChanges=function(){var e=this.getColumnVisibility(),t=J(this.commits[0].date);L.getElementById("uncommittedChanges").innerHTML="<td></td><td><b>"+Z(this.commits[0].message)+"</b></td>"+(e.date?'<td class="dateCol text" title="'+t.title+'">'+t.formatted+"</td>":"")+(e.author?'<td class="authorCol text" title="* <>">*</td>':"")+(e.commit?'<td class="text" title="*">*</td>':"")};e.prototype.renderFetchButton=function(){se(this.controlsElem,x,this.gitRemotes.length>0)};e.prototype.renderRefreshButton=function(){var e=!this.currentRepoRefreshState.inProgress;this.refreshBtnElem.title=e?"Refresh":"Refreshing";this.refreshBtnElem.innerHTML=e?S.refresh:S.loading;se(this.refreshBtnElem,H,!e)};e.prototype.renderTagDetails=function(e,t,i,s,n,o,r){var a=new K(this.gitRepos[this.currentRepo].issueLinkingConfig,true,true);var l="Tag <b><i>"+Z(e)+'</i></b><br><span class="messageContent">';l+="<b>Object: </b>"+Z(t)+"<br>";l+="<b>Commit: </b>"+Z(i)+"<br>";l+="<b>Tagger: </b>"+Z(s)+' &lt;<a href="mailto:'+Z(n)+'" tabindex="-1">'+Z(n)+"</a>&gt;<br>";l+="<b>Date: </b>"+Q(o)+"<br><br>";l+=a.format(r)+"</span>";He.showMessage(l)};e.prototype.getBranchContextMenuActions=function(s){var n=this;var o=s.ref,e=this.config.contextMenuActionsVisibility.branch;return[[{title:"Checkout Branch",visible:e.checkout&&this.gitBranchHead!==o,onClick:function(){return n.checkoutBranchAction(o,null,null,s)}},{title:"Rename Branch"+k,visible:e.rename,onClick:function(){He.showRefInput("Enter the new name for branch <b><i>"+Z(o)+"</i></b>:",o,"Rename Branch",function(e){Ke({command:"renameBranch",repo:n.currentRepo,oldName:o,newName:e},"Renaming Branch")},s)}},{title:"Delete Branch"+k,visible:e.delete&&this.gitBranchHead!==o,onClick:function(){var t=n.gitRemotes.filter(function(e){return n.gitBranches.includes("remotes/"+e+"/"+o)});var e=[{type:4,name:"Force Delete",value:n.config.dialogDefaults.deleteBranch.forceDelete}];if(t.length>0){e.push({type:4,name:"Delete this branch on the remote"+(n.gitRemotes.length>1?"s":"")+'<span class="dialogInfo" title="This branch is on the remote'+(t.length>1?"s: ":" ")+$(t.map(function(e){return Z('"'+e+'"')}))+'">'+S.info+"</span>",value:false})}He.showForm("Are you sure you want to delete the branch <b><i>"+Z(o)+"</i></b>?",e,"Delete Branch",function(e){Ke({command:"deleteBranch",repo:n.currentRepo,branchName:o,forceDelete:e[0],deleteOnRemotes:t.length>0&&e[1]?t:[]},"Deleting Branch")},s)}},{title:"Merge into current branch"+k,visible:e.merge&&this.gitBranchHead!==o,onClick:function(){return n.mergeAction(o,o,"Branch",s)}},{title:"Rebase current branch on Branch"+k,visible:e.rebase&&this.gitBranchHead!==o,onClick:function(){return n.rebaseAction(o,o,"Branch",s)}},{title:"Push Branch"+k,visible:e.push&&this.gitRemotes.length>0,onClick:function(){var i=n.gitRemotes.length>1,e=[{type:4,name:"Set Upstream",value:true},{type:3,name:"Push Mode",options:[{name:"Normal",value:""},{name:"Force With Lease",value:"force-with-lease"},{name:"Force",value:"force"}],default:""}];if(i){e.unshift({type:2,name:"Push to Remote",default:(n.gitRemotes.includes("origin")?n.gitRemotes.indexOf("origin"):0).toString(),options:n.gitRemotes.map(function(e,t){return{name:e,value:t.toString()}})})}He.showForm("Are you sure you want to push the branch <b><i>"+Z(o)+"</i></b>"+(i?"":" to the remote <b><i>"+Z(n.gitRemotes[0])+"</i></b>")+"?",e,"Yes, push",function(e){var t=n.gitRemotes[i?parseInt(e.shift()):0];Ke({command:"pushBranch",repo:n.currentRepo,branchName:o,remote:t,setUpstream:e[0],mode:e[1]},"Pushing Branch")},s)}}],[{title:"Copy Branch Name to Clipboard",visible:e.copyName,onClick:function(){ae({command:"copyToClipboard",type:"Branch Name",data:o})}}]]};e.prototype.getCommitContextMenuActions=function(n){var o=this;var r=n.hash,e=this.config.contextMenuActionsVisibility.commit;return[[{title:"Add Tag"+k,visible:e.addTag,onClick:function(){var e=o.config.dialogDefaults.addTag;var t=[{type:1,name:"Name",default:""},{type:2,name:"Type",default:e.type,options:[{name:"Annotated",value:"annotated"},{name:"Lightweight",value:"lightweight"}]},{type:0,name:"Message",default:"",placeholder:"Optional",info:"A message can only be added to an annotated tag."}];if(o.gitRemotes.length>1){var i=[{name:"Don't push",value:"-1"}];o.gitRemotes.forEach(function(e,t){return i.push({name:e,value:t.toString()})});var s=e.pushToRemote?o.gitRemotes.includes("origin")?o.gitRemotes.indexOf("origin"):0:-1;t.push({type:2,name:"Push to remote",options:i,default:s.toString(),info:"Once this tag has been added, push it to this remote."})}else if(o.gitRemotes.length===1){t.push({type:4,name:"Push to remote",value:e.pushToRemote,info:"Once this tag has been added, push it to the repositories remote."})}He.showForm("Add tag to commit <b><i>"+Ze(r)+"</i></b>:",t,"Add Tag",function(e){var t=o.gitRemotes.length>1&&e[3]!=="-1"?o.gitRemotes[parseInt(e[3])]:o.gitRemotes.length===1&&e[3]?o.gitRemotes[0]:null;Ke({command:"addTag",repo:o.currentRepo,tagName:e[0],commitHash:r,lightweight:e[1]==="lightweight",message:e[2],pushToRemote:t},"Adding Tag")},n)}},{title:"Create Branch"+k,visible:e.createBranch,onClick:function(){He.showForm("Create branch at commit <b><i>"+Ze(r)+"</i></b>:",[{type:1,name:"Name",default:""},{type:4,name:"Check out",value:o.config.dialogDefaults.createBranch.checkout}],"Create Branch",function(e){Ke({command:"createBranch",repo:o.currentRepo,branchName:e[0],commitHash:r,checkout:e[1]},"Creating Branch")},n)}}],[{title:"Checkout"+(globalState.alwaysAcceptCheckoutCommit?"":k),visible:e.checkout,onClick:function(){var t=function(){return Ke({command:"checkoutCommit",repo:o.currentRepo,commitHash:r},"Checking out Commit")};if(globalState.alwaysAcceptCheckoutCommit){t()}else{He.showCheckbox("Are you sure you want to checkout commit <b><i>"+Ze(r)+"</i></b>? This will result in a 'detached HEAD' state.","Always Accept",false,"Yes, checkout",function(e){if(e){o.updateGlobalViewState("alwaysAcceptCheckoutCommit",true)}t()},n)}}},{title:"Cherry Pick"+k,visible:e.cherrypick,onClick:function(){var i=o.commits[o.commitLookup[r]].parents.length>1;var e=[];if(i){var t=o.commits[o.commitLookup[r]].parents.map(function(e,t){return{name:Ze(e)+(typeof o.commitLookup[e]==="number"?": "+o.commits[o.commitLookup[e]].message:""),value:(t+1).toString()}});e.push({type:2,name:"Parent Hash",options:t,default:"1",info:"Choose the parent hash on the main branch, to cherry pick the commit relative to."})}e.push({type:4,name:"No Commit",value:false,info:"Cherry picked changes will be staged but not committed, so that you can select and commit specific parts of this commit."});He.showForm("Are you sure you want to cherry pick commit <b><i>"+Ze(r)+"</i></b>?",e,"Yes, cherry pick",function(e){var t=i?parseInt(e.shift()):0;Ke({command:"cherrypickCommit",repo:o.currentRepo,commitHash:r,parentIndex:t,noCommit:e[0]},"Cherry picking Commit")},n)}},{title:"Revert"+k,visible:e.revert,onClick:function(){if(o.commits[o.commitLookup[r]].parents.length>1){var e=o.commits[o.commitLookup[r]].parents.map(function(e,t){return{name:Ze(e)+(typeof o.commitLookup[e]==="number"?": "+o.commits[o.commitLookup[e]].message:""),value:(t+1).toString()}});He.showSelect("Are you sure you want to revert merge commit <b><i>"+Ze(r)+"</i></b>? Choose the parent hash on the main branch, to revert the commit relative to:","1",e,"Yes, revert",function(e){Ke({command:"revertCommit",repo:o.currentRepo,commitHash:r,parentIndex:parseInt(e)},"Reverting Commit")},n)}else{He.showConfirmation("Are you sure you want to revert commit <b><i>"+Ze(r)+"</i></b>?",function(){Ke({command:"revertCommit",repo:o.currentRepo,commitHash:r,parentIndex:0},"Reverting Commit")},n)}}},{title:"Drop"+k,visible:e.drop&&this.graph.dropCommitPossible(this.commitLookup[r]),onClick:function(){He.showConfirmation("Are you sure you want to permanently drop commit <b><i>"+Ze(r)+"</i></b>?",function(){Ke({command:"dropCommit",repo:o.currentRepo,commitHash:r},"Dropping Commit")},n)}}],[{title:"Merge into current branch"+k,visible:e.merge,onClick:function(){return o.mergeAction(r,Ze(r),"Commit",n)}},{title:"Rebase current branch on this Commit"+k,visible:e.rebase,onClick:function(){return o.rebaseAction(r,Ze(r),"Commit",n)}},{title:"Reset current branch to this Commit"+k,visible:e.reset,onClick:function(){He.showSelect("Are you sure you want to reset the <b>current branch</b> to commit <b><i>"+Ze(r)+"</i></b>?",o.config.dialogDefaults.resetCommit.mode,[{name:"Soft - Keep all changes, but reset head",value:"soft"},{name:"Mixed - Keep working tree, but reset index",value:"mixed"},{name:"Hard - Discard all changes",value:"hard"}],"Yes, reset",function(e){Ke({command:"resetToCommit",repo:o.currentRepo,commit:r,resetMode:e},"Resetting to Commit")},n)}}],[{title:"Copy Commit Hash to Clipboard",visible:e.copyHash,onClick:function(){ae({command:"copyToClipboard",type:"Commit Hash",data:r})}}]]};e.prototype.getRemoteBranchContextMenuActions=function(t,e){var i=this;var s=e.ref,n=this.config.contextMenuActionsVisibility.remoteBranch;var o=t!==""?s.substring(t.length+1):"";return[[{title:"Checkout Branch"+k,visible:n.checkout,onClick:function(){return i.checkoutBranchAction(s,t,null,e)}},{title:"Delete Remote Branch"+k,visible:n.delete&&t!=="",onClick:function(){He.showConfirmation("Are you sure you want to delete the remote branch <b><i>"+Z(s)+"</i></b>?",function(){Ke({command:"deleteRemoteBranch",repo:i.currentRepo,branchName:o,remote:t},"Deleting Remote Branch")},e)}},{title:"Fetch into local branch"+k,visible:n.fetch&&t!==""&&this.gitBranches.includes(o)&&this.gitBranchHead!==o,onClick:function(){He.showConfirmation("Are you sure you want to fetch the remote branch <b><i>"+Z(s)+"</i></b> into the local branch <b><i>"+Z(o)+"</i></b>?",function(){Ke({command:"fetchIntoLocalBranch",repo:i.currentRepo,remote:t,remoteBranch:o,localBranch:o},"Fetching Branch")},e)}},{title:"Pull into current branch"+k,visible:n.pull&&t!=="",onClick:function(){He.showForm("Are you sure you want to pull the remote branch <b><i>"+Z(s)+"</i></b> into the current branch? If a merge is required:",[{type:4,name:"Create a new commit even if fast-forward is possible",value:false},{type:4,name:"Squash commits",value:false}],"Yes, pull",function(e){Ke({command:"pullBranch",repo:i.currentRepo,branchName:o,remote:t,createNewCommit:e[0],squash:e[1]},"Pulling Branch")},e)}}],[{title:"Copy Branch Name to Clipboard",visible:n.copyName,onClick:function(){ae({command:"copyToClipboard",type:"Branch Name",data:s})}}]]};e.prototype.getStashContextMenuActions=function(e){var t=this;var i=e.hash,s=e.ref,n=this.config.contextMenuActionsVisibility.stash;return[[{title:"Apply Stash"+k,visible:n.apply,onClick:function(){He.showForm("Are you sure you want to apply the stash <b><i>"+Z(s.substring(5))+"</i></b>?",[{type:4,name:"Reinstate Index",value:t.config.dialogDefaults.applyStash.reinstateIndex,info:"Attempt to reinstate the indexed changes, in addition to the working tree's changes."}],"Yes, apply stash",function(e){Ke({command:"applyStash",repo:t.currentRepo,selector:s,reinstateIndex:e[0]},"Applying Stash")},e)}},{title:"Create Branch from Stash"+k,visible:n.createBranch,onClick:function(){He.showRefInput("Create a branch from stash <b><i>"+Z(s.substring(5))+"</i></b> with the name:","","Create Branch",function(e){Ke({command:"branchFromStash",repo:t.currentRepo,selector:s,branchName:e},"Creating Branch")},e)}},{title:"Pop Stash"+k,visible:n.pop,onClick:function(){He.showForm("Are you sure you want to pop the stash <b><i>"+Z(s.substring(5))+"</i></b>?",[{type:4,name:"Reinstate Index",value:t.config.dialogDefaults.popStash.reinstateIndex,info:"Attempt to reinstate the indexed changes, in addition to the working tree's changes."}],"Yes, pop stash",function(e){Ke({command:"popStash",repo:t.currentRepo,selector:s,reinstateIndex:e[0]},"Popping Stash")},e)}},{title:"Drop Stash"+k,visible:n.drop,onClick:function(){He.showConfirmation("Are you sure you want to drop the stash <b><i>"+Z(s.substring(5))+"</i></b>?",function(){Ke({command:"dropStash",repo:t.currentRepo,selector:s},"Dropping Stash")},e)}}],[{title:"Copy Stash Name to Clipboard",visible:n.copyName,onClick:function(){ae({command:"copyToClipboard",type:"Stash Name",data:s})}},{title:"Copy Stash Hash to Clipboard",visible:n.copyHash,onClick:function(){ae({command:"copyToClipboard",type:"Stash Hash",data:i})}}]]};e.prototype.getTagContextMenuActions=function(e,s){var n=this;var t=s.hash,o=s.ref,i=this.config.contextMenuActionsVisibility.tag;return[[{title:"View Details",visible:i.viewDetails&&e,onClick:function(){Ke({command:"tagDetails",repo:n.currentRepo,tagName:o,commitHash:t},"Retrieving Tag Details")}},{title:"Delete Tag"+k,visible:i.delete,onClick:function(){var e="Are you sure you want to delete the tag <b><i>"+Z(o)+"</i></b>?";if(n.gitRemotes.length>1){var i=[{name:"Don't delete on any remote",value:"-1"}];n.gitRemotes.forEach(function(e,t){return i.push({name:e,value:t.toString()})});He.showSelect(e+"<br>Do you also want to delete the tag on a remote:","-1",i,"Yes, delete",function(e){n.deleteTagAction(o,e!=="-1"?n.gitRemotes[parseInt(e)]:null)},s)}else if(n.gitRemotes.length===1){He.showCheckbox(e,"Also delete on remote",false,"Yes, delete",function(e){n.deleteTagAction(o,e?n.gitRemotes[0]:null)},s)}else{He.showConfirmation(e,function(){n.deleteTagAction(o,null)},s)}}},{title:"Push Tag"+k,visible:i.push&&this.gitRemotes.length>0,onClick:function(){if(n.gitRemotes.length===1){He.showConfirmation("Are you sure you want to push the tag <b><i>"+Z(o)+"</i></b> to the remote <b><i>"+Z(n.gitRemotes[0])+"</i></b>?",function(){Ke({command:"pushTag",repo:n.currentRepo,tagName:o,remote:n.gitRemotes[0]},"Pushing Tag")},s)}else if(n.gitRemotes.length>1){var e=(n.gitRemotes.includes("origin")?n.gitRemotes.indexOf("origin"):0).toString();var t=n.gitRemotes.map(function(e,t){return{name:e,value:t.toString()}});He.showSelect("Are you sure you want to push the tag <b><i>"+Z(o)+"</i></b>? Select the remote to push the tag to:",e,t,"Yes, push",function(e){Ke({command:"pushTag",repo:n.currentRepo,tagName:o,remote:n.gitRemotes[parseInt(e)]},"Pushing Tag")},s)}}}],[{title:"Copy Tag Name to Clipboard",visible:i.copyName,onClick:function(){ae({command:"copyToClipboard",type:"Tag Name",data:o})}}]]};e.prototype.getUncommittedChangesContextMenuActions=function(e){var t=this;var i=this.config.contextMenuActionsVisibility.uncommittedChanges;return[[{title:"Stash uncommitted changes"+k,visible:i.stash,onClick:function(){He.showForm("Are you sure you want to stash the <b>uncommitted changes</b>?",[{type:0,name:"Message",default:"",placeholder:"Optional"},{type:4,name:"Include Untracked",value:t.config.dialogDefaults.stashUncommittedChanges.includeUntracked,info:"Include all untracked files in the stash, and then clean them from the working directory."}],"Yes, stash",function(e){Ke({command:"pushStash",repo:t.currentRepo,message:e[0],includeUntracked:e[1]},"Stashing uncommitted changes")},e)}}],[{title:"Reset uncommitted changes"+k,visible:i.reset,onClick:function(){He.showSelect("Are you sure you want to reset the <b>uncommitted changes</b> to <b>HEAD</b>?",t.config.dialogDefaults.resetUncommitted.mode,[{name:"Mixed - Keep working tree, but reset index",value:"mixed"},{name:"Hard - Discard all changes",value:"hard"}],"Yes, reset",function(e){Ke({command:"resetToCommit",repo:t.currentRepo,commit:"HEAD",resetMode:e},"Resetting uncommitted changes")},e)}},{title:"Clean untracked files"+k,visible:i.clean,onClick:function(){He.showCheckbox("Are you sure you want to clean all untracked files?","Clean untracked directories",true,"Yes, clean",function(e){Ke({command:"cleanUntrackedFiles",repo:t.currentRepo,directories:e},"Cleaning untracked files")},e)}}],[{title:"Open Source Control View",visible:i.openSourceControlView,onClick:function(){ae({command:"viewScm"})}}]]};e.prototype.getCommitOfElem=function(e){var t=parseInt(e.dataset.id);return t<this.commits.length?this.commits[t]:null};e.prototype.getCommitId=function(e){return typeof this.commitLookup[e]==="number"?this.commitLookup[e]:null};e.prototype.checkoutBranchAction=function(t,i,e,s){var n=this;if(i!==null){He.showRefInput("Enter the name of the new branch you would like to create when checking out <b><i>"+Z(t)+"</i></b>:",e!==null?e:i!==""?t.substring(i.length+1):t,"Checkout Branch",function(e){if(n.gitBranches.includes(e)){He.showTwoButtons("The name <b><i>"+Z(e)+"</i></b> is already used by another branch:","Choose another branch name",function(){n.checkoutBranchAction(t,i,e,s)},"Check out the existing branch",function(){n.checkoutBranchAction(e,null,null,s)},s)}else{Ke({command:"checkoutBranch",repo:n.currentRepo,branchName:e,remoteBranch:t},"Checking out Branch")}},s)}else{Ke({command:"checkoutBranch",repo:this.currentRepo,branchName:t,remoteBranch:null},"Checking out Branch")}};e.prototype.deleteTagAction=function(e,t){Ke({command:"deleteTag",repo:this.currentRepo,tagName:e,deleteOnRemote:t},"Deleting Tag")};e.prototype.mergeAction=function(t,e,i,s){var n=this;He.showForm("Are you sure you want to merge "+i.toLowerCase()+" <b><i>"+Z(e)+"</i></b> into the current branch?",[{type:4,name:"Create a new commit even if fast-forward is possible",value:this.config.dialogDefaults.merge.noFastForward},{type:4,name:"Squash commits",value:this.config.dialogDefaults.merge.squash}],"Yes, merge",function(e){Ke({command:"merge",repo:n.currentRepo,obj:t,actionOn:i,createNewCommit:e[0],squash:e[1]},"Merging "+i)},s)};e.prototype.rebaseAction=function(i,e,s,t){var n=this;He.showForm("Are you sure you want to rebase the current branch on "+s.toLowerCase()+" <b><i>"+Z(e)+"</i></b>?",[{type:4,name:"Launch Interactive Rebase in new Terminal",value:this.config.dialogDefaults.rebase.interactive},{type:4,name:"Ignore Date (non-interactive rebase only)",value:this.config.dialogDefaults.rebase.ignoreDate}],"Yes, rebase",function(e){var t=e[0];Ke({command:"rebase",repo:n.currentRepo,obj:i,actionOn:s,ignoreDate:e[1],interactive:t},t?"Launching Interactive Rebase":"Rebasing on "+s)},t)};e.prototype.makeTableResizable=function(){var o=this;var e=L.getElementById("tableColHeaders"),r=L.getElementsByClassName("tableColHeader");var a,l=-1,h=-1,c=-1;var n=function(){r[0].style.width=a[0]+"px";r[0].style.padding="";for(var e=2;e<r.length;e++){r[e].style.width=a[parseInt(r[e].dataset.col)]+"px"}o.tableElem.className="fixedLayout";o.tableElem.style.cssText="";o.graph.limitMaxWidth(a[0]+b)};for(var t=0;t<r.length;t++){var i=parseInt(r[t].dataset.col);r[t].innerHTML+=(t>0?'<span class="resizeCol left" data-col="'+(i-1)+'"></span>':"")+(t<r.length-1?'<span class="resizeCol right" data-col="'+i+'"></span>':"")}var s=this.gitRepos[this.currentRepo].columnWidths;if(s===null){var d=this.config.defaultColumnVisibility;a=[C,C,d.date?C:v,d.author?C:v,d.commit?C:v];this.saveColumnWidths(a)}else{a=[s[0],C,s[1],s[2],s[3]]}if(a[0]!==C){n()}else{this.tableElem.className="autoLayout";var u=r[0].offsetWidth,m=this.graph.getContentWidth();var p=Math.round(this.viewElem.clientWidth*.333);if(Math.max(m,u)>p){this.graph.limitMaxWidth(p);m=p;this.tableElem.className+=" limitGraphWidth";this.tableElem.style.cssText="--limitGraphWidth:"+p+"px;"}else{this.graph.limitMaxWidth(-1);this.tableElem.style.cssText=""}if(u<Math.max(m,64)){r[0].style.padding="6px "+Math.floor((Math.max(m,64)-(u-b))/2)+"px"}}var f=function(e){if(h>-1){var t=e;var i=t.clientX-l;if(h===0){if(a[0]+i<y)i=-a[0]+y;if(r[1].clientWidth-b-i<y)i=r[1].clientWidth-b-y;a[0]+=i;r[0].style.width=a[0]+"px";o.graph.limitMaxWidth(a[0]+b)}else{var s=h!==1?a[h]:r[1].clientWidth-b;var n=h+1;while(a[n]===v)n++;if(s+i<y)i=-s+y;if(a[n]-i<y)i=a[n]-y;if(h!==1){a[h]+=i;r[c].style.width=a[h]+"px"}a[n]-=i;r[c+1].style.width=a[n]+"px"}l=t.clientX}};var g=function(){if(h>-1){h=-1;c=-1;l=-1;Ae.remove();o.saveColumnWidths(a)}};ee("resizeCol","mousedown",function(e){if(e.target===null)return;h=parseInt(e.target.dataset.col);while(a[h]===v)h--;l=e.clientX;var t=a[0]===C;for(var i=0;i<r.length;i++){var s=parseInt(r[i].dataset.col);if(t&&s!==1)a[s]=r[i].clientWidth-b;if(s===h)c=i}if(t)n();Ae.create("colResize",f,g)});e.addEventListener("contextmenu",function(e){e.stopPropagation();var t=function(e,t){a[e]=a[e]!==v?v:a[0]===C?C:t-b;o.saveColumnWidths(a);Ie.close();o.render()};Ie.show([[{title:"Date",visible:true,checked:a[2]!==v,onClick:function(){return t(2,128)}},{title:"Author",visible:true,checked:a[3]!==v,onClick:function(){return t(3,128)}},{title:"Commit",visible:true,checked:a[4]!==v,onClick:function(){return t(4,80)}}]],true,null,e)})};e.prototype.getColumnVisibility=function(){var e=this.gitRepos[this.currentRepo].columnWidths;if(e!==null){return{date:e[1]!==v,author:e[2]!==v,commit:e[3]!==v}}else{var t=this.config.defaultColumnVisibility;return{date:t.date,author:t.author,commit:t.commit}}};e.prototype.getNumColumns=function(){var e=this.getColumnVisibility();return 2+(e.date?1:0)+(e.author?1:0)+(e.commit?1:0)};e.prototype.scrollToCommit=function(e,t){var i=Je(L.getElementsByClassName("commit"),this.getCommitId(e));if(i===null)return;var s=this.controlsElem.clientHeight+i.offsetTop;if(t||s-8<this.viewElem.scrollTop||s+32-this.viewElem.clientHeight>this.viewElem.scrollTop){this.viewElem.scroll(0,this.controlsElem.clientHeight+i.offsetTop+12-this.viewElem.clientHeight/2)}};e.prototype.loadMoreCommits=function(){this.footerElem.innerHTML='<h2 id="loadingHeader">'+S.loading+"Loading ...</h2>";this.maxCommits+=this.config.loadMoreCommits;this.saveState();this.requestLoadRepoInfoAndCommits(false,true)};e.prototype.observeWindowSizeChanges=function(){var e=this;var t=c.outerWidth,i=c.outerHeight;c.addEventListener("resize",function(){if(t===c.outerWidth&&i===c.outerHeight){e.renderGraph()}else{t=c.outerWidth;i=c.outerHeight}})};e.prototype.observeWebviewStyleChanges=function(){var s=this;var n=le(P),o=le(W),r=le(O);this.findWidget.setColour(r);new MutationObserver(function(){var e=le(P),t=le(W),i=le(O);if(e!==n||t!==o){n=e;o=t;s.repoDropdown.refresh();s.branchDropdown.refresh()}if(i!==r){r=i;s.findWidget.setColour(r)}}).observe(L.documentElement,{attributes:true,attributeFilter:["style"]})};e.prototype.observeViewScroll=function(){var s=this;var n=this.viewElem.scrollTop>0,o=null;this.scrollShadowElem.className=n?f:"";this.viewElem.addEventListener("scroll",function(){var e=s.viewElem.scrollTop;if(n!==e>0){n=e>0;s.scrollShadowElem.className=n?f:""}if(s.config.loadMoreCommitsAutomatically&&s.moreCommitsAvailable&&!s.currentRepoRefreshState.inProgress){var t=s.viewElem.clientHeight,i=s.viewElem.scrollHeight;if(e>0&&t>0&&i>0&&e+t>=i-25){s.loadMoreCommits()}}if(o!==null)clearTimeout(o);o=setTimeout(function(){s.scrollTop=e;s.saveState();o=null},250)})};e.prototype.observeKeyboardEvents=function(){var n=this;L.addEventListener("keydown",function(e){if(He.isOpen()){if(e.key==="Escape"){He.close()}else if(e.key==="Enter"){He.submit()}}else if(Ie.isOpen()){if(e.key==="Escape"){Ie.close()}}else{if(e.key==="r"&&(e.ctrlKey||e.metaKey)){n.refresh(true)}else if(e.key==="f"&&(e.ctrlKey||e.metaKey)){n.findWidget.show(true)}else if(e.key==="h"&&(e.ctrlKey||e.metaKey)&&n.commitHead!==null){n.scrollToCommit(n.commitHead,true)}else if(e.key==="Escape"&&n.settingsWidget.isVisible()){n.settingsWidget.close()}else if(e.key==="Escape"&&n.findWidget.isVisible()){n.findWidget.close()}else if(n.expandedCommit!==null){if(e.key==="Escape"){n.closeCommitDetails(true)}else if(e.key==="ArrowUp"||e.key==="ArrowDown"){var t=n.commitLookup[n.expandedCommit.hash],i=-1;if(e.key==="ArrowUp"&&t>0){i=t-1}else if(e.key==="ArrowDown"&&t<n.commits.length-1){i=t+1}if(i>-1){e.preventDefault();var s=Je(L.getElementsByClassName("commit"),i);if(s!==null)n.loadCommitDetails(s)}}}}})};e.prototype.observeInternalUrls=function(){var s=this;L.body.addEventListener("click",function(e){if(e.target!==null&&e.target.className==="internalUrl"){var t=X(e.target.dataset.value);switch(e.target.dataset.type){case"commit":if(typeof s.commitLookup[t]==="number"&&(s.expandedCommit===null||s.expandedCommit.hash!==t||s.expandedCommit.compareWithHash!==null)){var i=Je(L.getElementsByClassName("commit"),s.commitLookup[t]);if(i!==null)s.loadCommitDetails(i)}break}}})};e.prototype.observeTableEvents=function(){var c=this;this.tableElem.addEventListener("click",function(e){if(e.target===null)return;var t=e.target;var i;if(t.className==="externalUrl"){return}if((i=t.closest(".gitRef"))!==null){e.stopPropagation();if(Ie.isOpen()){Ie.close()}}else if((i=t.closest(".commit"))!==null){if(c.expandedCommit!==null){var s=c.getCommitOfElem(i);if(s===null)return;if(c.expandedCommit.hash===s.hash){c.closeCommitDetails(true)}else if(e.ctrlKey||e.metaKey){if(c.expandedCommit.compareWithHash===s.hash){c.closeCommitComparison(true)}else{c.loadCommitComparison(i)}}else{c.loadCommitDetails(i)}}else{c.loadCommitDetails(i)}}});this.tableElem.addEventListener("dblclick",function(e){if(e.target===null)return;var t=e.target;var i;if((i=t.closest(".gitRef"))!==null){e.stopPropagation();et();var s=i.closest(".commit");var n=c.getCommitOfElem(s);if(n===null)return;if(i.classList.contains(A)||i.classList.contains(F)){var o=i.children[1];var r=X(i.dataset.name),a=i.classList.contains(A),l=t.className==="gitRefHeadRemote";if(a&&l){r=X(t.dataset.fullref);o=t;a=false}var h={type:"ref",hash:n.hash,index:parseInt(s.dataset.id),ref:r,elem:o};c.checkoutBranchAction(r,a?null:X((l?t:i).dataset.remote),null,h)}}});this.tableElem.addEventListener("contextmenu",function(e){if(e.target===null)return;var t=e.target;var i;if((i=t.closest(".gitRef"))!==null){e.stopPropagation();var s=i.closest(".commit");var n=c.getCommitOfElem(s);if(n===null)return;var o={type:"ref",hash:n.hash,index:parseInt(s.dataset.id),ref:X(i.dataset.name),elem:i.children[1]};var r=void 0;if(i.classList.contains(M)){r=c.getStashContextMenuActions(o)}else if(i.classList.contains(D)){r=c.getTagContextMenuActions(i.dataset.tagtype==="annotated",o)}else{var a=i.classList.contains(A),l=t.className==="gitRefHeadRemote";if(a&&l){o.ref=X(t.dataset.fullref);o.elem=t;a=false}if(a){r=c.getBranchContextMenuActions(o)}else{var h=X((l?t:i).dataset.remote);r=c.getRemoteBranchContextMenuActions(h,o)}}Ie.show(r,false,o,e)}else if((i=t.closest(".commit"))!==null){e.stopPropagation();var n=c.getCommitOfElem(i);if(n===null)return;var o={type:"commit",hash:n.hash,index:parseInt(i.dataset.id),elem:i};var r=void 0;if(n.hash===B){r=c.getUncommittedChangesContextMenuActions(o)}else if(n.stash!==null){o.ref=n.stash.selector;r=c.getStashContextMenuActions(o)}else{r=c.getCommitContextMenuActions(o)}Ie.show(r,false,o,e)}})};e.prototype.loadCommitDetails=function(e){this.closeCommitDetails(true);var t=this.getCommitOfElem(e);if(t===null)return;this.expandedCommit={id:parseInt(e.dataset.id),hash:t.hash,srcElem:e,commitDetails:null,fileChanges:null,fileTree:null,compareWithHash:null,compareWithSrcElem:null,avatar:null,codeReview:null,lastViewedFile:null,loading:true,fileChangesScrollTop:0};this.saveState();e.classList.add(R);this.renderCommitDetailsView(false);this.requestCommitDetails(this.expandedCommit.hash,false)};e.prototype.closeCommitDetails=function(e){if(this.expandedCommit!==null){var t=L.getElementById("cdv"),i=this.isCdvDocked();if(t!==null)t.remove();if(i)this.viewElem.style.bottom="0px";if(typeof this.expandedCommit.srcElem==="object"&&this.expandedCommit.srcElem!==null)this.expandedCommit.srcElem.classList.remove(R);if(typeof this.expandedCommit.compareWithSrcElem==="object"&&this.expandedCommit.compareWithSrcElem!==null)this.expandedCommit.compareWithSrcElem.classList.remove(R);this.expandedCommit=null;if(e){this.saveState();if(!i)this.renderGraph()}}};e.prototype.showCommitDetails=function(e,t,i,s,n,o){if(this.expandedCommit===null||this.expandedCommit.srcElem===null||this.expandedCommit.hash!==e.hash)return;if(!this.isCdvDocked()){var r=L.getElementById("cdv");if(r!==null)r.remove()}this.expandedCommit.commitDetails=e;if(je(this.expandedCommit.fileChanges,e.fileChanges)){this.expandedCommit.fileChanges=e.fileChanges;this.expandedCommit.fileTree=t}this.expandedCommit.avatar=i;this.expandedCommit.codeReview=s;if(!o)this.expandedCommit.lastViewedFile=n;this.expandedCommit.srcElem.classList.add(R);this.expandedCommit.loading=false;this.saveState();this.renderCommitDetailsView(o)};e.prototype.createFileTree=function(e,t){var i={},s,n,o,r,a;var l={type:"folder",name:"",folderPath:"",contents:i,open:true,reviewed:true};for(s=0;s<e.length;s++){a=l;o=e[s].newFilePath.split("/");r=this.currentRepo;for(n=0;n<o.length;n++){r+="/"+o[n];if(typeof this.gitRepos[r]!=="undefined"){if(typeof a.contents[o[n]]==="undefined"){a.contents[o[n]]={type:"repo",name:o[n],path:r}}break}else if(n<o.length-1){if(typeof a.contents[o[n]]==="undefined"){i={};a.contents[o[n]]={type:"folder",name:o[n],folderPath:r.substring(this.currentRepo.length+1),contents:i,open:true,reviewed:true}}a=a.contents[o[n]]}else if(o[n]!==""){a.contents[o[n]]={type:"file",name:o[n],index:s,reviewed:t===null||!t.remainingFiles.includes(e[s].newFilePath)}}}}if(t!==null)Oe(l);return l};e.prototype.loadCommitComparison=function(e){var t=this.expandedCommit;var i=this.getCommitOfElem(e);if(t!==null&&i!==null&&t.srcElem!==null){this.closeCommitComparison(false);t.compareWithHash=i.hash;t.compareWithSrcElem=e;t.fileChanges=null;t.fileTree=null;t.codeReview=null;t.lastViewedFile=null;t.avatar=null;t.loading=true;t.fileChangesScrollTop=0;this.saveState();t.srcElem.classList.add(R);t.compareWithSrcElem.classList.add(R);this.renderCommitDetailsView(false);this.requestCommitComparison(t.hash,t.compareWithHash,false)}};e.prototype.closeCommitComparison=function(e){var t=this.expandedCommit;if(t!==null&&t.compareWithHash!==null){if(t.compareWithSrcElem!==null)t.compareWithSrcElem.classList.remove(R);t.compareWithHash=null;t.compareWithSrcElem=null;t.fileChanges=null;t.fileTree=null;t.codeReview=null;t.lastViewedFile=null;t.avatar=null;if(e){t.loading=true;t.fileChangesScrollTop=0;this.renderCommitDetailsView(false);this.requestCommitDetails(t.hash,false)}this.saveState()}};e.prototype.showCommitComparison=function(e,t,i,s,n,o,r){var a=this.expandedCommit;if(a===null||a.srcElem===null||a.compareWithSrcElem===null||a.hash!==e||a.compareWithHash!==t)return;a.commitDetails=null;if(je(a.fileChanges,i)){a.fileChanges=i;a.fileTree=s}a.codeReview=n;if(!r)a.lastViewedFile=o;a.srcElem.classList.add(R);a.compareWithSrcElem.classList.add(R);a.loading=false;this.saveState();this.renderCommitDetailsView(r)};e.prototype.renderCommitDetailsView=function(e){var o=this;if(this.expandedCommit===null)return;var t=this.expandedCommit;if(t.srcElem===null)return;var i=L.getElementById("cdv"),s='<div id="cdvContent">',n=this.isCdvDocked();var r=this.getCommitOrder(t.hash,t.compareWithHash===null?t.hash:t.compareWithHash);var a=!t.loading&&r.to!==B;if(i===null){i=L.createElement(n?"div":"tr");i.id="cdv";i.className=n?"docked":"inline";this.setCdvHeight(i,n);if(n){L.body.appendChild(i)}else{te(i,t.srcElem)}}if(t.loading){s+='<div id="cdvLoading">'+S.loading+" Loading "+(t.compareWithHash===null?t.hash!==B?"Commit Details":"Uncommitted Changes":"Commit Comparison")+" ...</div>";if(t.compareWithHash===null)this.renderGraph()}else{s+='<div id="cdvSummary">';if(t.compareWithHash===null){if(t.hash!==B){var l=new K(this.gitRepos[this.currentRepo].issueLinkingConfig,true,true);var h=t.commitDetails;var c=h.parents.length>0?h.parents.map(function(e){var t=Z(e);return typeof o.commitLookup[e]==="number"?'<span class="internalUrl" data-type="commit" data-value="'+t+'" tabindex="-1">'+t+"</span>":t}).join(", "):"None";s+='<span class="cdvSummaryTop'+(t.avatar!==null?" withAvatar":"")+'"><span class="cdvSummaryTopRow"><span class="cdvSummaryKeyValues">'+"<b>Commit: </b>"+Z(h.hash)+"<br>"+"<b>Parents: </b>"+c+"<br>"+"<b>Author: </b>"+Z(h.author)+' &lt;<a href="mailto:'+Z(h.email)+'" tabindex="-1">'+Z(h.email)+"</a>&gt;<br>"+"<b>Date: </b>"+Q(h.date)+"<br>"+"<b>Committer: </b>"+Z(h.committer)+(h.signature!==null?Qe(h.signature):"")+"</span>"+(t.avatar!==null?'<span class="cdvSummaryAvatar"><img src="'+t.avatar+'"></span>':"")+"</span></span><br><br>"+l.format(h.body)}else{s+="Displaying all uncommitted changes."}this.renderGraph()}else{s+="Displaying all changes from <b>"+r.from+"</b> to <b>"+(r.to!==B?r.to:"Uncommitted Changes")+"</b>."}s+='</div><div id="cdvFiles">'+Me(t.fileTree,t.fileChanges,t.lastViewedFile,this.getFileViewType())+'</div><div id="cdvDivider"></div>'}s+='</div><div id="cdvControls"><div id="cdvClose" class="cdvControlBtn" title="Close">'+S.close+"</div>"+(a?'<div id="cdvCodeReview" class="cdvControlBtn">'+S.review+"</div>":"")+(!t.loading?'<div id="cdvFileViewTypeTree" class="cdvControlBtn cdvFileViewTypeBtn" title="File Tree View">'+S.fileTree+'</div><div id="cdvFileViewTypeList" class="cdvControlBtn cdvFileViewTypeBtn" title="File List View">'+S.fileList+"</div>":"")+'</div><div class="cdvHeightResize"></div>';i.innerHTML=n?s:'<td><div class="cdvHeightResize"></div></td><td colspan="'+(this.getNumColumns()-1)+'">'+s+"</td>";if(!t.loading)this.setCdvDivider();if(!e){if(n){var d=this.controlsElem.clientHeight+t.srcElem.offsetTop;if(d-8<this.viewElem.scrollTop){this.viewElem.scroll(0,d-8)}else if(d-this.viewElem.clientHeight+32>this.viewElem.scrollTop){this.viewElem.scroll(0,d-this.viewElem.clientHeight+32)}}else{var d=this.controlsElem.clientHeight+i.offsetTop,u=this.gitRepos[this.currentRepo].cdvHeight;if(this.config.autoCenterCommitDetailsView){this.viewElem.scroll(0,d-12+(u-this.viewElem.clientHeight)/2)}else if(d-32<this.viewElem.scrollTop){this.viewElem.scroll(0,d-32)}else if(d+u-this.viewElem.clientHeight+8>this.viewElem.scrollTop){this.viewElem.scroll(0,d+u-this.viewElem.clientHeight+8)}}}this.makeCdvResizable();L.getElementById("cdvClose").addEventListener("click",function(){o.closeCommitDetails(true)});if(!t.loading){this.makeCdvFileViewInteractive();this.renderCdvFileViewTypeBtns();this.makeCdvDividerDraggable();var m=L.getElementById("cdvFiles"),p=null;m.scroll(0,t.fileChangesScrollTop);m.addEventListener("scroll",function(){var e=L.getElementById("cdvFiles");if(e===null)return;t.fileChangesScrollTop=e.scrollTop;if(p!==null)clearTimeout(p);p=setTimeout(function(){o.saveState();p=null},250)});L.getElementById("cdvFileViewTypeTree").addEventListener("click",function(){o.changeFileViewType(1)});L.getElementById("cdvFileViewTypeList").addEventListener("click",function(){o.changeFileViewType(2)});if(a){this.renderCodeReviewBtn();L.getElementById("cdvCodeReview").addEventListener("click",function(e){var t=o.expandedCommit;if(t===null||e.target===null)return;var i=e.target.closest("#cdvCodeReview");if(i.classList.contains(f)){ae({command:"endCodeReview",repo:o.currentRepo,id:t.codeReview.id});o.endCodeReview()}else{var s=o.getCommitOrder(t.hash,t.compareWithHash===null?t.hash:t.compareWithHash);var n=t.compareWithHash!==null?s.from+"-"+s.to:t.hash;ae({command:"startCodeReview",repo:o.currentRepo,id:n,commitHash:t.hash,compareWithHash:t.compareWithHash,files:Ye(t.fileTree,t.fileChanges),lastViewedFile:t.lastViewedFile})}})}}};e.prototype.setCdvHeight=function(e,t){var i=this.gitRepos[this.currentRepo].cdvHeight,s=c.innerHeight;if(i>s-40){i=Math.max(s-40,100);if(i!==this.gitRepos[this.currentRepo].cdvHeight){this.gitRepos[this.currentRepo].cdvHeight=i;this.saveRepoState()}}var n=i+"px";e.style.height=n;if(t)this.viewElem.style.bottom=n};e.prototype.setCdvDivider=function(){var e=(this.gitRepos[this.currentRepo].cdvDivider*100).toFixed(2)+"%";var t=L.getElementById("cdvSummary"),i=L.getElementById("cdvDivider"),s=L.getElementById("cdvFiles");if(t!==null)t.style.width=e;if(i!==null)i.style.left=e;if(s!==null)s.style.left=e};e.prototype.makeCdvResizable=function(){var r=this;var a=-1;var t=function(e){if(a<0)return;var t=e.pageY-a,i=r.isCdvDocked(),s=c.innerHeight;a=e.pageY;var n=r.gitRepos[r.currentRepo].cdvHeight+(i?-t:t);if(n<100)n=100;else if(n>600)n=600;if(n>s-40)n=Math.max(s-40,100);if(r.gitRepos[r.currentRepo].cdvHeight!==n){r.gitRepos[r.currentRepo].cdvHeight=n;var o=L.getElementById("cdv");if(o!==null)r.setCdvHeight(o,i);if(!i)r.renderGraph()}};var i=function(e){if(a<0)return;t(e);r.saveRepoState();a=-1;Ae.remove()};ee("cdvHeightResize","mousedown",function(e){a=e.pageY;Ae.create("rowResize",t,i)})};e.prototype.makeCdvDividerDraggable=function(){var i=this;var s=-1,n=-1;var o=function(e){if(s<0)return;var t=(e.clientX-s)/n;if(t<.2)t=.2;else if(t>.8)t=.8;if(i.gitRepos[i.currentRepo].cdvDivider!==t){i.gitRepos[i.currentRepo].cdvDivider=t;i.setCdvDivider()}};var r=function(e){if(s<0)return;o(e);i.saveRepoState();s=-1;Ae.remove()};L.getElementById("cdvDivider").addEventListener("mousedown",function(){var e=L.getElementById("cdvContent");if(e===null)return;var t=e.getBoundingClientRect();s=t.left;n=t.width;Ae.create("colResize",o,r)})};e.prototype.cdvFileViewed=function(e,t){var i=this.expandedCommit,s=L.getElementById("cdvFiles"),n=t.closest(".fileTreeFileRecord");if(i===null||i.fileTree===null||s===null)return;i.lastViewedFile=e;var o=L.getElementById("cdvLastFileViewed");if(o!==null)o.remove();o=L.createElement("span");o.id="cdvLastFileViewed";o.title="Last File Viewed";o.innerHTML=S.eyeOpen;ie(o,n,"fileTreeFileAction");if(i.codeReview!==null){var r=i.codeReview.remainingFiles.indexOf(e);if(r>-1){ae({command:"codeReviewFileReviewed",repo:this.currentRepo,id:i.codeReview.id,filePath:e});Pe(i.fileTree,e);Ge(s,i.fileTree,e);i.codeReview.remainingFiles.splice(r,1);if(i.codeReview.remainingFiles.length===0){i.codeReview=null;this.renderCodeReviewBtn()}}}this.saveState()};e.prototype.isCdvDocked=function(){return this.config.commitDetailsViewLocation===1};e.prototype.getCommitOrder=function(e,t){if(this.commitLookup[e]>this.commitLookup[t]){return{from:e,to:t}}else{return{from:t,to:e}}};e.prototype.getFileViewType=function(){return this.gitRepos[this.currentRepo].fileViewType===0?this.config.defaultFileViewType:this.gitRepos[this.currentRepo].fileViewType};e.prototype.setFileViewType=function(e){this.gitRepos[this.currentRepo].fileViewType=e;this.saveRepoState()};e.prototype.changeFileViewType=function(e){var t=this.expandedCommit;if(t===null||t.fileTree===null||t.fileChanges===null)return;this.setFileViewType(e);L.getElementById("cdvFiles").innerHTML=Me(t.fileTree,t.fileChanges,t.lastViewedFile,e);this.makeCdvFileViewInteractive();this.renderCdvFileViewTypeBtns()};e.prototype.makeCdvFileViewInteractive=function(){var h=this;ee("fileTreeFolder","click",function(e){var t=h.expandedCommit;if(t===null||t.fileTree===null||e.target===null)return;var i=e.target.closest(".fileTreeFolder");var s=i.parentElement;s.classList.toggle("closed");var n=!s.classList.contains("closed");s.children[0].children[0].innerHTML=n?S.openFolder:S.closedFolder;s.children[1].classList.toggle("hidden");Ne(t.fileTree,decodeURIComponent(i.dataset.folderpath),n);h.saveState()});ee("fileTreeFile","click",function(e){var t=h.expandedCommit;if(t===null||e.target===null)return;var i=e.target.closest(".fileTreeFile");if(!i.classList.contains("gitDiffPossible"))return;var s=h.commits[h.commitLookup[t.hash]],n,o;var r=i.dataset.type;if(t.compareWithHash!==null){var a=h.getCommitOrder(t.hash,t.compareWithHash);n=a.from;o=a.to}else if(s.stash!==null){if(r==="U"){n=s.stash.untrackedFilesHash;o=s.stash.untrackedFilesHash;r="A"}else{n=s.stash.baseHash;o=t.hash}}else{n=t.hash;o=t.hash}var l=decodeURIComponent(i.dataset.newfilepath);h.cdvFileViewed(l,i);ae({command:"viewDiff",repo:h.currentRepo,fromHash:n,toHash:o,oldFilePath:decodeURIComponent(i.dataset.oldfilepath),newFilePath:l,type:r})});ee("fileTreeRepo","click",function(e){if(e.target===null)return;h.loadRepos(h.gitRepos,null,decodeURIComponent(e.target.closest(".fileTreeRepo").dataset.path))});ee("copyGitFile","click",function(e){if(e.target===null)return;var t=e.target.closest(".copyGitFile");ae({command:"copyFilePath",repo:h.currentRepo,filePath:decodeURIComponent(t.dataset.filepath)})});ee("openGitFile","click",function(e){var t=h.expandedCommit;if(t===null||e.target===null)return;var i=e.target.closest(".openGitFile");var s=decodeURIComponent(i.dataset.filepath);h.cdvFileViewed(s,i);ae({command:"openFile",repo:h.currentRepo,filePath:s})})};e.prototype.renderCdvFileViewTypeBtns=function(){if(this.expandedCommit===null)return;var e=L.getElementById("cdvFileViewTypeTree"),t=L.getElementById("cdvFileViewTypeList");if(e===null||t===null)return;var i=this.getFileViewType()===2;se(e,f,!i);se(t,f,i)};e.prototype.startCodeReview=function(e,t,i){if(this.expandedCommit===null||this.expandedCommit.hash!==e||this.expandedCommit.compareWithHash!==t)return;this.saveAndRenderCodeReview(i)};e.prototype.endCodeReview=function(){if(this.expandedCommit===null||this.expandedCommit.codeReview===null)return;this.saveAndRenderCodeReview(null)};e.prototype.saveAndRenderCodeReview=function(e){var t=L.getElementById("cdvFiles");if(this.expandedCommit===null||this.expandedCommit.fileTree===null||t===null)return;this.expandedCommit.codeReview=e;We(this.expandedCommit.fileTree,e===null);this.saveState();this.renderCodeReviewBtn();ze(t,this.expandedCommit.fileTree)};e.prototype.renderCodeReviewBtn=function(){if(this.expandedCommit===null)return;var e=L.getElementById("cdvCodeReview");if(e===null)return;var t=this.expandedCommit.codeReview!==null;se(e,f,t);e.title=(t?"End":"Start")+" Code Review"};return e}();var Ie=new de,He=new fe,Ae=new e;var Fe=false;c.addEventListener("load",function(){if(Fe)return;Fe=true;j(initialState.config.customEmojiShortcodeMappings);var e=L.getElementById("view");if(e===null)return;var s=new Te(e,t.getState());var i=s.getSettingsWidget();var n=new he;c.addEventListener("message",function(e){var t=e.data;switch(t.command){case"addRemote":o(t.error,"Unable to Add Remote");if(i.isVisible())i.refresh();break;case"addTag":r(t.errors,"Unable to Add Tag");break;case"applyStash":o(t.error,"Unable to Apply Stash");break;case"branchFromStash":o(t.error,"Unable to Create Branch from Stash");break;case"checkoutBranch":o(t.error,"Unable to Checkout Branch");break;case"checkoutCommit":o(t.error,"Unable to Checkout Commit");break;case"cherrypickCommit":r(t.errors,"Unable to Cherry Pick Commit");break;case"cleanUntrackedFiles":o(t.error,"Unable to Clean Untracked Files");break;case"commitDetails":if(t.commitDetails!==null){s.showCommitDetails(t.commitDetails,s.createFileTree(t.commitDetails.fileChanges,t.codeReview),t.avatar,t.codeReview,t.codeReview!==null?t.codeReview.lastViewedFile:null,t.refresh)}else{s.closeCommitDetails(true);He.showError("Unable to load Commit Details",t.error,null,null)}break;case"compareCommits":if(t.error===null){s.showCommitComparison(t.commitHash,t.compareWithHash,t.fileChanges,s.createFileTree(t.fileChanges,t.codeReview),t.codeReview,t.codeReview!==null?t.codeReview.lastViewedFile:null,t.refresh)}else{s.closeCommitComparison(true);He.showError("Unable to load Commit Comparison",t.error,null,null)}break;case"copyFilePath":a(t.error,"Unable to Copy File Path to the Clipboard");break;case"copyToClipboard":a(t.error,"Unable to Copy "+t.type+" to Clipboard");break;case"createBranch":o(t.error,"Unable to Create Branch");break;case"deleteBranch":r(t.errors,"Unable to Delete Branch");break;case"deleteRemote":o(t.error,"Unable to Delete Remote");if(i.isVisible())i.refresh();break;case"deleteRemoteBranch":o(t.error,"Unable to Delete Remote Branch");break;case"deleteTag":o(t.error,"Unable to Delete Tag");break;case"deleteUserDetails":l(t.errors,"Unable to Remove Git User Details",function(){if(i.isVisible()){i.refresh()}},true);break;case"dropCommit":o(t.error,"Unable to Drop Commit");break;case"dropStash":o(t.error,"Unable to Drop Stash");break;case"editRemote":o(t.error,"Unable to Save Changes to Remote");if(i.isVisible())i.refresh();break;case"editUserDetails":l(t.errors,"Unable to Save Git User Details",function(){if(i.isVisible()){i.refresh()}},true);break;case"fetch":o(t.error,"Unable to Fetch from Remote(s)");break;case"fetchAvatar":n.resize(t.image,function(e){s.loadAvatar(t.email,e)});break;case"fetchIntoLocalBranch":o(t.error,"Unable to Fetch into Local Branch");break;case"getSettings":i.loadSettings(t.settings,t.error);break;case"loadCommits":s.processLoadCommitsResponse(t);break;case"loadRepoInfo":s.processLoadRepoInfoResponse(t);break;case"loadRepos":s.loadRepos(t.repos,t.lastActiveRepo,t.loadRepo);break;case"merge":o(t.error,"Unable to Merge "+t.actionOn);break;case"openExtensionSettings":a(t.error,"Unable to Open Extension Settings");break;case"openFile":a(t.error,"Unable to Open File");break;case"popStash":o(t.error,"Unable to Pop Stash");break;case"pruneRemote":o(t.error,"Unable to Prune Remote");break;case"pullBranch":o(t.error,"Unable to Pull Branch");break;case"pushBranch":o(t.error,"Unable to Push Branch");break;case"pushStash":o(t.error,"Unable to Stash Uncommitted Changes");break;case"pushTag":o(t.error,"Unable to Push Tag");break;case"rebase":if(t.error===null){if(t.interactive){He.closeActionRunning()}else{s.refresh(false)}}else{He.showError("Unable to Rebase current branch on "+t.actionOn,t.error,null,null)}break;case"refresh":s.refresh(false);break;case"renameBranch":o(t.error,"Unable to Rename Branch");break;case"resetToCommit":o(t.error,"Unable to Reset to Commit");break;case"revertCommit":o(t.error,"Unable to Revert Commit");break;case"setGlobalViewState":a(t.error,"Unable to save the Global View State");break;case"startCodeReview":if(t.error===null){s.startCodeReview(t.commitHash,t.compareWithHash,t.codeReview)}else{He.showError("Unable to Start Code Review",t.error,null,null)}break;case"tagDetails":if(t.error===null){s.renderTagDetails(t.tagName,t.tagHash,t.commitHash,t.name,t.email,t.date,t.message)}else{He.showError("Unable to retrieve Tag Details",t.error,null,null)}break;case"viewDiff":a(t.error,"Unable to View Diff of File");break;case"viewScm":a(t.error,"Unable to open the Source Control View");break}});function o(e,t){if(e===null){s.refresh(false)}else{He.showError(t,e,null,null)}}function r(e,t){var i=h(e);if(i.error!==null){He.showError(t,i.error,null,null)}if(i.partialOrCompleteSuccess){s.refresh(false)}}function a(e,t,i){if(i===void 0){i=false}if(e!==null){He.showError(t,e,null,null)}else if(i){He.closeActionRunning()}}function l(e,t,i,s){if(s===void 0){s=false}var n=h(e);a(n.error,t,s);if(n.partialOrCompleteSuccess){i()}}function h(e){var t=null,i=false;for(var s=0;s<e.length;s++){if(e[s]!==null){t=t!==null?t+"\n\n"+e[s]:e[s]}else{i=true}}return{error:t,partialOrCompleteSuccess:i}}});function Me(e,t,i,s){return s===2?Ve(e,t,i):De(e,t,i)}function De(e,t,i){var s=(e.name!==""?'<span class="fileTreeFolder'+(e.reviewed?"":" pendingReview")+'" data-folderpath="'+encodeURIComponent(e.folderPath)+'"><span class="fileTreeFolderIcon">'+(e.open?S.openFolder:S.closedFolder)+'</span><span class="gitFolderName">'+Z(e.name)+"</span></span>":"")+'<ul class="fileTreeFolderContents'+(!e.open?" hidden":"")+'">';var n=_e(e);for(var o=0;o<n.length;o++){var r=e.contents[n[o]];if(r.type==="folder"){s+="<li"+(r.open?"":' class="closed"')+' data-pathseg="'+encodeURIComponent(r.name)+'">'+De(r,t,i)+"</li>"}else{s+=Ue(r.name,r,t,i)}}return s+"</ul>"}function Ve(e,t,i){var a=function(e,t){var i=_e(e);var s=[];for(var n=0;n<i.length;n++){var o=e.contents[i[n]];var r=(t!==""?t+"/":"")+o.name;if(o.type==="folder"){s=s.concat(a(o,r))}else{s.push({relPath:r,leaf:o})}}return s};var s=a(e,"");var n="";for(var o=0;o<s.length;o++){n+=Ue(s[o].relPath,s[o].leaf,t,i)}return'<ul class="fileTreeFolderContents">'+n+"</ul>"}function Ue(e,t,i,s){var n=encodeURIComponent(e),o=Z(e);if(t.type==="file"){var r=i[t.index];var a=r.additions!==null&&r.deletions!==null;var l=r.type==="U"||a;return'<li data-pathseg="'+n+'"><span class="fileTreeFileRecord"><span class="fileTreeFile'+(l?" gitDiffPossible":"")+(t.reviewed?"":" pendingReview")+'" data-oldfilepath="'+encodeURIComponent(r.oldFilePath)+'" data-newfilepath="'+encodeURIComponent(r.newFilePath)+'" data-type="'+r.type+'" title="'+(l?"Click to View Diff":"Unable to View Diff"+(r.type!=="D"?" (this is a binary file)":""))+" • "+h[r.type]+(r.type==="R"?" ("+Z(r.oldFilePath)+" → "+Z(r.newFilePath)+")":"")+'"><span class="fileTreeFileIcon">'+S.file+'</span><span class="gitFileName '+r.type+'">'+o+"</span></span>"+(r.type!=="A"&&r.type!=="U"&&r.type!=="D"&&a?'<span class="fileTreeFileAddDel">(<span class="fileTreeFileAdd" title="'+r.additions+" addition"+(r.additions!==1?"s":"")+'">+'+r.additions+'</span>|<span class="fileTreeFileDel" title="'+r.deletions+" deletion"+(r.deletions!==1?"s":"")+'">-'+r.deletions+"</span>)</span>":"")+(r.newFilePath===s?'<span id="cdvLastFileViewed" title="Last File Viewed">'+S.eyeOpen+"</span>":"")+'<span class="copyGitFile fileTreeFileAction" title="Copy File Path to the Clipboard" data-filepath="'+encodeURIComponent(r.newFilePath)+'">'+S.copy+"</span>"+(r.type!=="D"?'<span class="openGitFile fileTreeFileAction" title="Click to Open File" data-filepath="'+encodeURIComponent(r.newFilePath)+'">'+S.openFile+"</span>":"")+"</span></li>"}else{return'<li data-pathseg="'+n+'"><span class="fileTreeRepo" data-path="'+encodeURIComponent(t.path)+'" title="Click to View Repository"><span class="fileTreeRepoIcon">'+S.closedFolder+"</span>"+o+"</span></li>"}}function Ne(e,t,i){var s=t.split("/"),n,o=e;for(n=0;n<s.length;n++){if(typeof o.contents[s[n]]!=="undefined"){o=o.contents[s[n]];if(n===s.length-1)o.open=i}else{return}}}function Pe(e,t){var i=t.split("/"),s,n=e,o=[e];for(s=0;s<i.length;s++){if(typeof n.contents[i[s]]!=="undefined"){if(s<i.length-1){n=n.contents[i[s]];o.push(n)}else{n.contents[i[s]].reviewed=true}}else{break}}for(s=o.length-1;s>=0;s--){var r=Object.keys(o[s].contents),a=true;for(var l=0;l<r.length;l++){var h=o[s].contents[r[l]];if((h.type==="folder"||h.type==="file")&&!h.reviewed){a=false;break}}o[s].reviewed=a}}function We(e,t){e.reviewed=t;var i=Object.keys(e.contents);for(var s=0;s<i.length;s++){var n=e.contents[i[s]];if(n.type==="folder"){We(n,t)}else if(n.type==="file"){n.reviewed=t}}}function Oe(e){var o=function(e){var t=true;var i=Object.keys(e.contents);for(var s=0;s<i.length;s++){var n=e.contents[i[s]];if(n.type==="folder"&&!o(n)||n.type==="file"&&!n.reviewed)t=false}e.reviewed=t;return t};o(e)}function ze(e,t){var i=re(e);if(i===null)return;for(var s=0;s<i.children.length;s++){var n=i.children[s];var o=decodeURIComponent(n.dataset.pathseg);var r=qe(t,o);if(r.type==="folder"){se(n.children[0],I,!r.reviewed);ze(n,r)}else if(r.type==="file"){se(n.children[0].children[0],I,!r.reviewed)}}}function Ge(e,t,i){var a=i;var l=function(e,t){var i=re(e);if(i===null)return;for(var s=0;s<i.children.length;s++){var n=i.children[s];var o=decodeURIComponent(n.dataset.pathseg);if(a===o||a.startsWith(o+"/")){var r=qe(t,o);if(r.type==="folder"){se(n.children[0],I,!r.reviewed);a=a.substring(o.length+1);l(n,r)}else if(r.type==="file"){se(n.children[0].children[0],I,!r.reviewed)}break}}};l(e,t)}function Ye(e,n){var o=[];var r=function(e){var t=Object.keys(e.contents);for(var i=0;i<t.length;i++){var s=e.contents[t[i]];if(s.type==="folder"){r(s)}else if(s.type==="file"){o.push(n[s.index].newFilePath)}}};r(e);return o}function _e(i){var e=Object.keys(i.contents);e.sort(function(e,t){return i.contents[e].type!=="file"&&i.contents[t].type==="file"?-1:i.contents[e].type==="file"&&i.contents[t].type!=="file"?1:i.contents[e].name<i.contents[t].name?-1:i.contents[e].name>i.contents[t].name?1:0});return e}function qe(e,t){var i=e,s=t.split("/");for(var n=0;n<s.length;n++){i=i.contents[s[n]]}return i}function je(e,t){if(e===null!==(t===null)){return true}else if(e===null&&t===null){return false}else{return!G(e,t,function(e,t){return e.additions===t.additions&&e.deletions===t.deletions&&e.newFilePath===t.newFilePath&&e.oldFilePath===t.oldFilePath&&e.type===t.type})}}function Ze(e){return e.substring(0,8)}function Xe(e){var d=[],t=[],u=[],m=[];var p=function(e){var t={},i={};for(var s=0;s<e.length;s++){var n=u[e[s]];if(typeof t[n]==="number"){if(typeof i[n]==="undefined"){i[n]=[t[n]]}i[n].push(e[s])}else{t[n]=e[s]}}var o=Object.keys(i);for(var s=0;s<o.length;s++){var r=i[o[s]],a=[];for(var l=0;l<r.length;l++){var h=r[l];var c=d[h].lastIndexOf("/",d[h].length-u[h].length-2);if(m[h]<c){u[h]=d[h].substring(c+1);a.push(h)}else{u[h]=d[h]}}if(a.length>1){p(a)}}};var i=[];for(var s=0;s<e.length;s++){m.push(e[s].indexOf("/"));if(m[s]===e[s].length-1||m[s]===-1){d.push(e[s]);t.push(e[s]);u.push(e[s])}else{d.push(e[s].endsWith("/")?e[s].substring(0,e[s].length-1):e[s]);var n=d[s].substring(d[s].lastIndexOf("/")+1);t.push(n);u.push(n);i.push(s)}}p(i);var o=[];for(var s=0;s<e.length;s++){var r=void 0;if(t[s]===u[s]){r=""}else{var a=u[s].substring(0,u[s].length-t[s].length-1);var l=a.split("/");var h=l[0]!==""?2:3;if(l.length>h)l.splice(h,l.length-h,"...");r=(u[s]!==d[s]?".../":"")+l.join("/")}o.push({name:t[s],value:e[s],hint:r})}return o}function Ke(e,t){He.showActionRunning(t);ae(e)}function $e(e,t){var i=[],s={},n;for(var o=0;o<e.length;o++){i.push({name:e[o],remotes:[]});s[e[o]]=o}if(initialState.config.combineLocalAndRemoteBranchLabels){var r=[];for(var o=0;o<t.length;o++){if(t[o].remote!==null){var a=t[o].name.substring(t[o].remote.length+1);if(typeof s[a]==="number"){i[s[a]].remotes.push(t[o].remote);continue}}r.push(t[o])}n=r}else{n=t}return{heads:i,remotes:n}}function Je(e,t){if(t===null)return null;var i=t.toString();for(var s=0;s<e.length;s++){if(i===e[s].dataset.id)return e[s]}return null}function Qe(e){return'<span class="signatureInfo '+e.status+'" title="'+n[e.status]+":"+" Signed by "+Z(e.signer!==""?e.signer:"<Unknown>")+" (GPG Key Id: "+Z(e.key!==""?e.key:"<Unknown>")+')">'+(e.status==="G"?S.passed:e.status==="B"?S.failed:S.inconclusive)+"</span>"}function et(){if(He.isOpen())He.close();if(Ie.isOpen())Ie.close()}})(document,window);